!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("anichart",[],e):"object"==typeof exports?exports.anichart=e():t.anichart=e()}(window,(function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=8)}([function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._offset=0,this._reference=t.timingRef.previousStart}var e,r,i;return e=t,i=[{key:"transRef",value:function(t){switch(t){case this.timingRef.previousStart:return"previousStart";case this.timingRef.previousEnd:return"previousEnd";case this.timingRef.absolute:return"absolute"}}}],(r=[{key:"calOffsetTime",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;if(0===i.size){var o=0;switch(this.reference){case t.timingRef.previousStart:o=e+this.offset-n;break;case t.timingRef.previousEnd:o=r+this.offset-n;break;case t.timingRef.absolute:o=this.offset+n;break;default:o=e+this.offset-n}return o}var s=this,u=new Map,l=1e6;return"object"===a(this.offset)&&i.forEach((function(t,e){l>parseFloat(t["data-datum"][s.offset.field])&&(l=parseFloat(t["data-datum"][s.offset.field]))})),i.forEach((function(i,o){var c=0;switch(c="number"==typeof s.offset?s.offset:"object"===a(s.offset)?s.offset.minOffset*parseFloat(i["data-datum"][s.offset.field])/l:0,s.reference){case t.timingRef.previousStart:u.set(o,e+c-n);break;case t.timingRef.previousEnd:u.set(o,r+c-n);break;case t.timingRef.absolute:u.set(o,c+n);break;default:u.set(o,e+c-n)}})),u}},{key:"reference",set:function(e){if(void 0!==e){var r=t.transRef(e);Object.keys(t.timingRef).includes(r)?this._reference=e:alert("the 'reference' of TimingSpec has to be one of 'previousStart', 'previousEnd' or 'absolute'. ")}},get:function(){return this._reference}},{key:"offset",set:function(e){void 0!==e&&("number"==typeof e?this._offset=Math.floor(e/(1e3/t.FRAME_RATE))*(1e3/t.FRAME_RATE):"object"===a(e)&&(this._offset=e))},get:function(){return this._offset}}])&&n(e.prototype,r),i&&n(e,i),t}();i.FRAME_RATE=20,i.timingRef={previousStart:"start with previous",previousEnd:"start after previous",absolute:"absolute"};var o=i;e.default=o,t.exports=e.default},function(t,e,r){"use strict";function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=e.Util=void 0;var u=function(){function t(){i(this,t)}return s(t,null,[{key:"deepClone",value:function(e){if(!e||1==e)return e;var r=n(e);if("number"==r||"string"==r)return e;var a=Array.isArray(e)?[]:{};if(e instanceof Map){a=new Map;for(var i=0;i<e.keys().length;i++){var o=e.keys()[i];a.set(o,t.deepClone(e.get(o)))}}for(var s in e)e.hasOwnProperty(s)&&(a[s]=t.deepClone(e[s]));return a}},{key:"formatTime",value:function(t){var e=parseInt(t/1e3),r=parseInt(t%1e3/10);return(e<10?"0"+e:""+e)+":"+(r<10?"0"+r:""+r)}},{key:"color2RGB",value:function(t){if(t){if(t=t.toLowerCase(),Array.from(this.colorNames.keys()).includes(t)&&(t=this.colorNames.get(t)),(t=t.replace(/\s/g,"")).indexOf("rgb")>=0){var e=t.substr(t.indexOf("(")+1),r=(e=e.substring(0,e.indexOf(")"))).split(",");return 3===r.length&&(r[3]=255),[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]}if(t.indexOf("#")>=0)return this.HEX2RGB(t)}return"none"}},{key:"HEX2RGB",value:function(t){if("#"===t.charAt(0)&&(t=t.substr(1)),t.length<2||t.length>6)return!1;var e,r,a,n=t.split("");if(2===t.length)r=e=parseInt(n[0].toString()+n[1].toString(),16),a=e;else if(3===t.length)e=parseInt(n[0].toString()+n[0].toString(),16),r=parseInt(n[1].toString()+n[1].toString(),16),a=parseInt(n[2].toString()+n[2].toString(),16);else{if(6!==t.length)return!1;e=parseInt(n[0].toString()+n[1].toString(),16),r=parseInt(n[2].toString()+n[3].toString(),16),a=parseInt(n[4].toString()+n[5].toString(),16)}return[e,r,a,255]}},{key:"toJSON",value:function(t){var e={nodeType:(t=t||this).nodeType};t.tagName?e.tagName=t.tagName.toLowerCase():t.nodeName&&(e.nodeName=t.nodeName),t.nodeValue&&(e.nodeValue=t.nodeValue);var r=t.attributes;if(r){e.attr={};for(var a,n=0;n<r.length|(a=r[n]);n++)e.attr[a.nodeName]=a.nodeValue}return e}},{key:"toDOM",value:function(t){var e;switch("string"==typeof t&&(t=JSON.parse(t)),t.nodeType){case 1:e=document.createElementNS("http://www.w3.org/2000/svg",t.tagName);for(var r,a=t.attr||{},i=0;i<Object.keys(a).length|(r=Object.keys(a)[i]);i++){var o="object"===n(a[r])?JSON.stringify(a[r],null,0):a[r];e.setAttributeNS(null,r,o)}break;case 3:e=document.createTextNode(t.nodeValue);break;case 8:e=document.createComment(t.nodeValue);break;case 9:e=document.implementation.createDocument();break;case 10:e=document.implementation.createDocumentType(t.nodeName);break;case 11:e=document.createDocumentFragment();break;default:return e}return e}},{key:"discretizePath",value:function(e){if("path"!==e.tagName)return null;var r=e.attr||{};return r.d?t.discretizeD(r.d,r.fill):null}},{key:"discretizeD",value:function(e,r){for(var a=[],n=/[MmLlHhVvZzCcSsQqTtAa][^MmLlHhVvZzCcSsQqTtAa]*/gi,i=void 0;i=n.exec(e);){var o=a.reduce((function(t,e){return t+e.length}),0);a.push(e.slice(o,i.index)),a.push(i[0])}var s=a.map((function(t){var e=t.slice(0,1),r=t.slice(1).split(/[ ,]/).filter((function(t){return t.trim()})).map((function(t){return parseFloat(t)}));return e?{command:e,parameters:r}:null})).filter((function(t){return t}));if(s.every((function(t){return"MmLlHhVv".includes(t.command)}))&&!t.convertColor(r)){var u=[],l=null,c=!0;if(s.forEach((function(t){if(c)if("M"!==t.command){if(!l)return c=!1;if("m"!==t.command){var e=l,r=t.command===t.command.toLowerCase()?l.slice():[0,0];switch(t.command.toLowerCase()){case"l":r=r.map((function(e,r){return e+t.parameters[r]}));break;case"h":r[0]+=t.parameters[0],r[1]=e[1];break;case"v":r[1]+=t.parameters[0],r[0]=e[0]}r?(u.push([e,r]),l=r):c=!1}else l=l.map((function(e,r){return e+t.parameters[r]}))}else l=t.parameters.slice(-2)})),c)return{type:"lines",data:u}}if(s.every((function(t){return"MmLlAaZz".includes(t.command)}))&&s.filter((function(t){return"a"===t.command.toLowerCase()})).length){var f=[],h=null,d=!0;if(s.forEach((function(e){if(d)if("m"!==e.command.toLowerCase()){if(!h)return d=!1;if("z"!==e.command.toLowerCase()){var r=h,a=e.command.toLowerCase()===e.command?h.slice():[0,0];if("a"!==e.command.toLowerCase())return h=a.map((function(t,r){return t+e.parameters[r]}));a=a.map((function(t,r){return t+e.parameters[r+5]})),f.push({...t.svgArcToCenterParam.apply(null,r.concat(e.parameters.slice(0,5)).concat(a)),rx:e.parameters[0],ry:e.parameters[1],rotate:e.parameters[2]}),h=a}}else h=e.parameters.slice(-2)})),(f.length<=0||!f.every((function(t){return["cx","cy"].reduce((function(e,r){return e+Math.abs(t[r]-f[0][r])}),0)<.1})))&&(d=!1),d){var p=f.reduce((function(t,e){return t?e.rx+e.ry>t.rx+t.ry?e:t:e}),null);return{type:"pies",data:{cx:p.cx,cy:p.cy,startAngle:p.startAngle,endAngle:p.endAngle,radius:f.map((function(t){return{rx:t.rx,ry:t.ry,rotate:t.rotate}}))}}}}return null}},{key:"radian",value:function(t,e,r,a){var n=t*r+e*a,i=Math.sqrt((t*t+e*e)*(r*r+a*a)),o=Math.acos(n/i);return t*a-e*r<0&&(o=-o),o}},{key:"svgArcToCenterParam",value:function(e,r,a,n,i,o,s,u,l){var c,f,h,d,p,m=2*Math.PI;if(a<0&&(a=-a),n<0&&(n=-n),0==a||0==n)throw Error("rx and ry can not be 0");var g=Math.sin(i),y=Math.cos(i),v=(e-u)/2,b=(r-l)/2,k=(e+u)/2,T=(r+l)/2,A=y*v+g*b,w=y*b-g*v,S=A*A/(a*a)+w*w/(n*n);S>1&&(a*=Math.sqrt(S),n*=Math.sqrt(S));var x=a*n,M=a*w,E=n*A,N=M*M+E*E;if(!N)throw Error("start point can not be same as end point");var F=Math.sqrt(Math.abs((x*x-N)/N));o==s&&(F=-F);var I=F*M/n,O=-F*E/a;c=y*I-g*O+k,f=g*I+y*O+T;var C=(A-I)/a,P=(A+I)/a,R=(w-O)/n,_=(w+O)/n;for(h=t.radian(1,0,C,R),d=t.radian(C,R,-P,-_);d>m;)d-=m;for(;d<0;)d+=m;for(0!=s&&0!=s||(d-=m),p=h+d;p>m;)p-=m;for(;p<0;)p+=m;return{cx:c,cy:f,startAngle:h,deltaAngle:d,endAngle:p,clockwise:1==s||1==s}}},{key:"convertColor",value:function(t,e,r){if("string"!=typeof t)return t;if("none"===t)return null;t=t.trim();var a=null;switch(void 0===r&&(r=e,t.startsWith("#")?e="hex":t.startsWith("rgb")&&(e="rgb")),e){case"rgb":a=t.split("(")[1].split(",").map((function(t){return parseFloat(t)}));break;case"hex":a=t.slice(1).match(/.{1,2}/g).map((function(t){return parseInt(t,16)}));default:return t}switch(a=a.slice(0,3),r){case"hex":return"#"+a.map((function(t){return t.toString(16).padStart(2,"0")})).join("");case"rgb":return"rgb(".concat(a.join(","),")");default:return t}}},{key:"polarToCartesian",value:function(t,e,r,a){return{x:Math.round(100*(t+r*Math.cos(a)))/100,y:Math.round(100*(e+r*Math.sin(a)))/100}}},{key:"arc",value:function(e,r,a,n,i,o){i=i<0?i+2*Math.PI:i,a=0===a?0:a-1,n+=1;var s=(o=o<0||i>o?o+2*Math.PI:o)-i<=Math.PI?0:1,u=t.polarToCartesian(e,r,n,o),l=t.polarToCartesian(e,r,n,i),c=t.polarToCartesian(e,r,a,o),f=t.polarToCartesian(e,r,a,i),h=!1;return u.x===l.x&&u.y===l.y&&(l.y-=1,f.y-=1,h=!0),h?["M"+u.x,u.y,"A"+n,n,0,s,1,l.x,l.y,"M"+f.x,f.y,"A"+a,a,0,s,0,c.x,c.y+"Z"].join(","):["M"+u.x,u.y,"A"+n,n,0,s,0,l.x,l.y,"L"+f.x,f.y,"A"+a,a,0,s,1,c.x,c.y,"L"+u.x,u.y+"Z"].join(",")}},{key:"domNodeToString",value:function(t){var e=document.createElement("div");return e.appendChild(t),e.innerHTML}},{key:"strToDomNode",value:function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}},{key:"transShape",value:function(e,r,a){if("path"!==e.tagName){var n=!1;(e.getAttribute("x")||e.getAttribute("y"))&&(n=!0,e.setAttribute("x",e.getAttribute("x")?parseFloat(e.getAttribute("x"))+r:r),e.setAttribute("y",e.getAttribute("y")?parseFloat(e.getAttribute("y"))+a:a)),(e.getAttribute("x1")||e.getAttribute("y1")||e.getAttribute("x2")||e.getAttribute("y2"))&&(n=!0,e.setAttribute("x1",e.getAttribute("x1")?parseFloat(e.getAttribute("x1"))+r:r),e.setAttribute("x2",e.getAttribute("x2")?parseFloat(e.getAttribute("x2"))+r:r),e.setAttribute("y1",e.getAttribute("y1")?parseFloat(e.getAttribute("y1"))+a:a),e.setAttribute("y2",e.getAttribute("y2")?parseFloat(e.getAttribute("y2"))+a:a)),(e.getAttribute("cx")||e.getAttribute("cy"))&&(n=!0,e.setAttribute("cx",e.getAttribute("cx")?parseFloat(e.getAttribute("cx"))+r:r),e.setAttribute("cy",e.getAttribute("cy")?parseFloat(e.getAttribute("cy"))+a:a)),n||("circle"===e.tagName?(e.setAttribute("cx",r),e.setAttribute("cy",a)):(e.setAttribute("x",r),e.setAttribute("y",a)))}else if(e.getAttribute("d")){var i=t.setPathDValue(e.getAttribute("d"),!1,r,a);e.setAttribute("d",i)}}},{key:"setPathDValue",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Map;t=t.replace(/(?<=\d)\s(?=[mMlLhHvVcCsSqQtTaAzZ])/g,"").replace(/(?<=[mMlLhHvVcCsSqQtTaA])\s(?=(\d|[-+]))/g,"").replace(/\s/g,",");var i=new RegExp(/[mMlLhHvVcCsSqQtTaAzZ][^mMlLhHvVcCsSqQtTaAzZ]*/g),o="",s=t.match(i);if(s){var u=s[0].substring(0,1),l="0",c="0";if("m"===u||"M"===u){var f=s[0].substring(1).split(",");l=f[0],c=f[1]}for(var h=0;h<s.length;h++){var d=s[h].substring(0,1),p=s[h].substring(1);switch(o+=d,d){case"H":o=this.calNumTrans(o,n,h,d,p,e,l,r);break;case"h":o=this.calNumTrans(o,n,h,d,p,e,"0",0);break;case"V":o=this.calNumTrans(o,n,h,d,p,e,c,a);break;case"v":o=this.calNumTrans(o,n,h,d,p,e,"0",0);break;case"M":case"L":case"T":case"C":case"S":case"Q":for(var m=p.split(","),g=0;g<m.length;g++)o=g%2==0?this.calNumTrans(o,n,h,d,m[g],e,l,r):this.calNumTrans(o,n,h,d,m[g],e,c,a),g!==m.length-1&&(o+=",");break;case"m":case"l":case"t":case"c":case"s":case"q":for(var y=p.split(","),v=0;v<y.length;v++)o=this.calNumTrans(o,n,h,d,y[v],e,"0",0),v!==y.length-1&&""!==y[v]&&(o+=",");break;case"A":for(var b=p.split(","),k=0;k<b.length;k++)k===b.length-2?(o=this.calNumTrans(o,n,h,d,b[k],e,parseFloat(l)+1,r),o+=","):k===b.length-1?o=this.calNumTrans(o,n,h,d,b[k],e,parseFloat(c)+1,a):o+=b[k]+",";break;case"a":for(var T=p.split(","),A=0;A<T.length;A++)A===T.length-2?(o=this.calNumTrans(o,n,h,d,T[A],e,"1",0),o+=","):A===T.length-1?o=this.calNumTrans(o,n,h,d,T[A],e,"1",0):o+=T[A]+","}}"z"!==t.charAt(t.length-1)&&"Z"!==t.charAt(t.length-1)||(o+="Z")}return o}},{key:"calNumTrans",value:function(t,e,r,a,n,i,o,s){if(a=a.toLowerCase(),i)if(void 0!==e.get(a)){for(var u=e.get(a),l=!1,c=0;c<u.length;c++)if(u[c].cmdIdx===r){t+=o,l=!0;break}l||(t+=n)}else t+=n;else n.length>0&&(t+=parseFloat(n)+s);return t}},{key:"calTransD",value:function(t,e,r,a,n){t=t.replace(/(?<=\d)\s(?=[mMlLhHvVcCsSqQtTaAzZ])/g,"").replace(/(?<=[mMlLhHvVcCsSqQtTaA])\s(?=(\d|[-+]))/g,"").replace(/\s/g,","),e=e.replace(/(?<=\d)\s(?=[mMlLhHvVcCsSqQtTaAzZ])/g,"").replace(/(?<=[mMlLhHvVcCsSqQtTaA])\s(?=(\d|[-+]))/g,"").replace(/\s/g,",");var i="";if(0===r)i=t;else if(1===r)i=e;else for(var o=0,s=a.length;o<s;o++)i+=(0===o?"M":"L")+((n[o][0]-a[o][0])*r+a[o][0])+","+((n[o][1]-a[o][1])*r+a[o][1]);return"z"!==t.charAt(t.length-1)&&"Z"!==t.charAt(t.length-1)||(i+="Z"),i}},{key:"arcTransition",value:function(t,e,r,a,n,i){var o=function(t,e){return e<t?function(){throw"startAngle should smaller than endAngle"}():null};o(t,e),o(r,a);var s=function(t,e){return e-2*Math.PI*Math.floor((e-t)/Math.PI/2)};e=s(t,e),r=s(t,r),a=s(r,a),a=s(r-=Math.abs(r-t)+Math.abs(a-e)<2*Math.PI?0:2*Math.PI,a);var u=i||function(t,e,r){return r*(e-t)+t};return[u(t,r,n),u(e,a,n)]}},{key:"findDiffCmds",value:function(e){var r=new Map;return e.forEach((function(e,a){for(var n=[],i=0;i<e.length;i++)void 0!==e[i]&&n.push(e[i].d?e[i].d:"m0,0");n.length>0&&t.compareD(n,r)})),r}},{key:"compareD",value:function(t,e){for(var r=new RegExp(/[mlhvcsqta][^mlhvcsqtaz]*/g),n=t[0],i=(n=(n=n.toLowerCase()).replace(/(?<=\d)\s(?=[mlhvcsqtaz])/g,"").replace(/(?<=[mlhvcsqta])\s(?=(\d|[-+]))/g,"").replace(/\s/g,",")).match(r),o=1;o<t.length;o++)for(var s=t[o],u=(s=(s=s.toLowerCase()).replace(/(?<=\d)\s(?=[mlhvcsqtaz])/g,"").replace(/(?<=[mlhvcsqta])\s(?=(\d|[-+]))/g,"").replace(/\s/g,",")).match(r),l=0;l<i.length;l++)if(void 0===u[l]){var c=i[l].substring(0,1);void 0===e.get(c)&&e.set(c,[]);var f={};f.cmdIdx=l,f.diffAttrIdxs=[];for(var h=i[l].substring(1).split(","),d=0;d<h.length;d++)f.diffAttrIdxs.push(d);e.get(c).push(f)}else{var p=u[l].substring(0,1),m=u[l].substring(1),g=i[l].substring(1);if(m!==g){void 0===e.get(p)&&e.set(p,[]);var y={};y.cmdIdx=l,y.diffAttrIdxs=[];for(var v=m.split(","),b=g.split(","),k=0;k<v.length;k++)Math.floor(1e3*parseFloat(v[k]))!==Math.floor(1e3*parseFloat(b[k]))&&y.diffAttrIdxs.push(k);for(var T=!1,A=0;A<e.get(p).length;A++)if(e.get(p)[A].cmdIdx===y.cmdIdx){T=!0,e.get(p)[A].diffAttrIdxs=[].concat(a(new Set([].concat(a(e.get(p)[A].diffAttrIdxs),a(y.diffAttrIdxs)))));break}T||e.get(p).push(y)}}}},{key:"getTransformAttrs",value:function(t){var e=t.getAttribute("transform");if(e){e=(e=e.replace(/translate|scale|rotate|\s/g,(function(t){return" "===t?"":"@"+t}))).replace(/(^@*)|(@*$)/g,"").split("@");for(var r="",a="",n=0;n<e.length;n++)e[n].indexOf("translate")>=0?a=e[n]:e[n].indexOf("scale")>=0&&(r=e[n]);var i=["0","0"],o="1";return""!==a&&(i=a.replace(/translate\(| |\)/g,"").split(",")),""!==r&&(o=r.replace(/scale\(| |\)/g,"")),{transNums:[parseFloat(i[0]),parseFloat(i[1])],scaleNum:parseFloat(o)}}return{transNums:[0,0],scaleNum:1}}},{key:"checkHTML",value:function(t){return/<[^>]+>/g.test(t)}}]),t}();e.Util=u,u.colorNames=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgrey","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["grey","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo  ","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);var l=function(){function t(){i(this,t),this.chartWidth=0,this.chartHeight=0}return s(t,[{key:"setViewport",value:function(t,e){this.chartWidth=t,this.chartHeight=e}}]),t}();e.Viewport=l},function(t,e,r){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.globalVar=void 0;var n={jsMovin:new(((a=r(6))&&a.__esModule?a:{default:a}).default),markLayers:new Map};e.globalVar=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=c(r(4)),n=c(r(17)),i=c(r(18)),o=c(r(0)),s=r(1),u=r(2),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],a=!0,n=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(t){n=!0,i=t}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function m(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))).chartIdx,t.selection,t.grouping=new i.default,t.actions=[],t.domMarks=new Map,t.animationStartTime=1e6,t.animationEndTime=0,t}var r,c,y;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,t),r=e,y=[{key:"renderAnimation",value:function(){var t=this;this.allMarkAni.forEach((function(e,r){t.wholeEndTime<e.startTime+e.totalDuration&&(t.wholeEndTime=e.startTime+e.totalDuration);for(var a,i=new Map,o=new Map,s=0;s<e.actionAttrs.length|(a=e.actionAttrs[s]);s++)a.type===n.default.actionTargets.mark?void 0===o.get(a.attribute.attrName)?o.set(a.attribute.attrName,[a]):o.get(a.attribute.attrName).push(a):a.type===n.default.actionTargets.mask?void 0===i.get(a.attribute.attrName)?i.set(a.attribute.attrName,[a]):i.get(a.attribute.attrName).push(a):console.log("we have some action with no type !!!!!");i.forEach((function(t,r){var a=new n.default;a.type=n.default.actionTargets.mask,a.chartIdx=t[0].chartIdx,a.animationType=t[0].animationType,a.startTime=0,a.duration=t[0].startTime,a.attribute={attrName:t[0].attribute.attrName,from:t[0].attribute.from,to:t[0].attribute.from},e.actionAttrs.push(a);for(var i=0;i<t.length;i++){var o=new n.default;o.type=n.default.actionTargets.mask,o.chartIdx=t[i].chartIdx,o.animationType=t[i].animationType,o.startTime=t[i].startTime+t[i].duration,i===t.length-1?o.duration="wholeEnd":o.duration=t[i+1].startTime-t[i].startTime-t[i].duration,o.attribute={attrName:t[i].attribute.attrName,from:t[i].attribute.to,to:t[i].attribute.to},e.actionAttrs.push(o)}})),o.forEach((function(t,r){var a=new n.default;a.type=n.default.actionTargets.mark,a.animationType=t[0].animationType,a.startTime=0,a.duration=t[0].startTime,a.attribute={attrName:t[0].attribute.attrName,from:t[0].attribute.from,to:t[0].attribute.from},e.actionAttrs.push(a);for(var i=0;i<t.length;i++){var o=new n.default;o.type=n.default.actionTargets.mark,o.animationType=t[i].animationType,o.startTime=t[i].startTime+t[i].duration,i===t.length-1?o.duration="wholeEnd":o.duration=t[i+1].startTime-t[i].startTime-t[i].duration,o.attribute={attrName:t[i].attribute.attrName,from:t[i].attribute.to,to:t[i].attribute.to},e.actionAttrs.push(o)}}))})),console.log("The duration of the generated animation is: "+this.wholeEndTime+"ms"),this.allMarkAni.forEach((function(e,r){for(var a,n=0;n<e.actionAttrs.length|(a=e.actionAttrs[n]);n++)"wholeEnd"===a.duration&&(a.duration=t.wholeEndTime-a.startTime)})),console.log("all mark ani: ",this.allMarkAni)}},{key:"mapToLottieSpec",value:function(){this.allMarkAni.forEach((function(t,e){for(var r=0;r<t.actionAttrs.length;r++){var a=t.actionAttrs[r];if(a.duration>0)if(console.log("type: ",a.type),a.type===n.default.actionTargets.mark){var i=Math.ceil(a.startTime/(1e3/o.default.FRAME_RATE)),s=Math.ceil((a.startTime+a.duration)/(1e3/o.default.FRAME_RATE));u.globalVar.markLayers.get(e).setAnimatableProperty(a.attribute.attrName,i,s,100*a.attribute.from,100*a.attribute.to,a.easing)}else if(a.type===n.default.actionTargets.mask){var c=document.getElementById(e),f=l.LayerFactory.boundingBox(c),h=Math.ceil(a.startTime/(1e3/o.default.FRAME_RATE)),d=Math.ceil((a.startTime+a.duration)/(1e3/o.default.FRAME_RATE));f.setAnimatableProperty(a.attribute.attrName,h,d,100*a.attribute.from,100*a.attribute.to,a.easing),u.globalVar.jsMovin.addMask(f,u.globalVar.markLayers.get(e))}else console.error("unkonwn actions target: ",a.type)}}))}},{key:"renderFrame",value:function(t){var r=[];return this.allMarkAni.forEach((function(a,n){for(var i,o=new Map,s=0;s<a.actionAttrs.length|(i=a.actionAttrs[s]);s++)if(i.attribute.from!==i.attribute.to||0!==i.duration){var u=e.calAttrValue(i,n,t);u!==(t>=0?e.calAttrValue(i,n,t-1):"")&&(i.startTime<=t&&i.startTime+i.duration>=t?o.set(i.attribute.attrName,{type:i.type,animationType:i.animationType,endTime:i.startTime+i.duration,attrName:i.attribute.attrName,value:u}):i.startTime+i.duration<t&&void 0!==o.get(i.attribute.attrName)&&o.get(i.attribute.attrName).endTime<i.startTime+i.duration&&o.set(i.attribute.attrName,{type:i.type,animationType:i.animationType,endTime:i.startTime+i.duration,attrName:i.attribute.attrName,value:u}))}o.size>0&&r.push([n,o])})),r}},{key:"calAttrValue",value:function(t,e,r){var a,i=t.chartIdx;if(t.startTime<=r&&t.startTime+t.duration>=r){var o=parseFloat(r-t.startTime)/parseFloat(t.duration),u=this.calRatio(o,t.easing);switch(t.attribute.attrName){case"fill":case"stroke":if(t.type===n.default.actionTargets.mark&&Array.isArray(t.attribute.to)){for(var l,c,f=0;f<t.attribute.to.length;f++)if(t.attribute.to[f][0]===e&&"string"==typeof t.attribute.to[f][1]){l=t.attribute.from[f][1],c=t.attribute.to[f][1];break}var h=s.Util.color2RGB(l),d=s.Util.color2RGB(c);a="rgb("+(parseInt((d[0]-h[0])*u)+h[0])+","+(parseInt((d[1]-h[1])*u)+h[1])+","+(parseInt((d[2]-h[2])*u)+h[2])+")"}break;case"textContent":if(t.type===n.default.actionTargets.mark&&Array.isArray(t.attribute.to)){for(var p=0,m=0;m<t.attribute.to.length;m++)if(t.attribute.to[m][0]===e&&(!isNaN(t.attribute.to[m][1])||"string"==typeof t.attribute.to[m][1])){p=t.attribute.to[m][1];break}a=p}break;case"width":case"height":case"r":if(t.type===n.default.actionTargets.mark)if(Array.isArray(t.attribute.to)){for(var g=0,y=0,v=0;v<t.attribute.to.length;v++)if(t.attribute.to[v][0]===e&&!isNaN(t.attribute.from[v][1])&&!isNaN(t.attribute.to[v][1])){g=t.attribute.from[v][1],y=t.attribute.to[v][1];break}a=g+(y-g)*u}else{var b=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);a=0-(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(0-b)}else{var k=parseFloat(this.minStatus.get(t.attribute.attrName)),T=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);a=k<0?k+(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(T-k):(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*T}break;case"y":case"y1":case"y2":case"cy":if(t.type===n.default.actionTargets.mark)if(Array.isArray(t.attribute.to)){for(var A=0,w=0,S=0;S<t.attribute.to.length;S++)if(t.attribute.to[S][0]===e&&!isNaN(t.attribute.from[S][1])&&!isNaN(t.attribute.to[S][1])){A=t.attribute.from[S][1],w=t.attribute.to[S][1];break}a=A+(w-A)*u}else{var x=this.startY,M=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);a=x-(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(x-M)}else t.type===n.default.actionTargets.mask&&(a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName])-1+(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(parseFloat(this.finalStatus.get(e)[i].height)+2));break;case"x":case"x1":case"x2":case"cx":if(t.type===n.default.actionTargets.mark)if(Array.isArray(t.attribute.to)){for(var E=0,N=0,F=0;F<t.attribute.to.length;F++)if(t.attribute.to[F][0]===e&&!isNaN(t.attribute.from[F][1])&&!isNaN(t.attribute.to[F][1])){E=t.attribute.from[F][1],N=t.attribute.to[F][1];break}a=E+(N-E)*u}else{var I=this.startX,O=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);a=I+(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(O-I)}else t.type===n.default.actionTargets.mask&&(a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName])-1+(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(parseFloat(this.finalStatus.get(e)[i].width)+2));break;case"startAngle":var C,P=parseFloat(this.finalStatus.get(e)[i].startAngle),R=parseFloat(this.finalStatus.get(e)[i].endAngle),_=P<0?P+2*Math.PI:P,j=R<0||_>R?R+2*Math.PI:R;C=j>_?_+(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(j-_):_+(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(2*Math.PI-_+j),a={cx:parseFloat(this.finalStatus.get(e)[i].cx),cy:parseFloat(this.finalStatus.get(e)[i].cy),innerRadius:parseFloat(this.finalStatus.get(e)[i].innerRadius),outterRadius:parseFloat(this.finalStatus.get(e)[i].outterRadius)+2,startAngle:C,endAngle:parseFloat(this.finalStatus.get(e)[i].endAngle)};break;case"innerRadius":var L=parseFloat(this.finalStatus.get(e)[i].innerRadius),B=parseFloat(this.finalStatus.get(e)[i].outterRadius),V=(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(B-L);a=V<0?{cx:parseFloat(this.finalStatus.get(e)[i].cx),cy:parseFloat(this.finalStatus.get(e)[i].cy),innerRadius:parseFloat(this.finalStatus.get(e)[i].innerRadius)+2,outterRadius:parseFloat(this.finalStatus.get(e)[i].outterRadius)-V+2,startAngle:parseFloat(this.finalStatus.get(e)[i].startAngle),endAngle:parseFloat(this.finalStatus.get(e)[i].endAngle)}:{cx:parseFloat(this.finalStatus.get(e)[i].cx),cy:parseFloat(this.finalStatus.get(e)[i].cy),innerRadius:parseFloat(this.finalStatus.get(e)[i].innerRadius)+V+2,outterRadius:parseFloat(this.finalStatus.get(e)[i].outterRadius)+2,startAngle:parseFloat(this.finalStatus.get(e)[i].startAngle),endAngle:parseFloat(this.finalStatus.get(e)[i].endAngle)};break;case"stroke-dashoffset":var G=parseFloat(this.finalStatus.get(e)[i]["stroke-dasharray"]);a=0-(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(0-G);break;case"d":if(t.type===n.default.actionTargets.mark&&Array.isArray(t.attribute.to)){for(var q="",H="",z="",D="",X=0;X<t.attribute.to.length;X++)if(t.attribute.to[X][0]===e&&t.attribute.from[X][1]&&t.attribute.to[X][1]){q=t.attribute.from[X][1],H=t.attribute.to[X][1],z=t.attribute.from[X][2],D=t.attribute.to[X][2];break}a=s.Util.calTransD(q,H,u,z,D)}break;default:var U=parseFloat(this.minStatus.get(t.attribute.attrName)),Y=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);a=U<0?U+(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*(Y-U):(parseFloat(t.attribute.to-t.attribute.from)*u+t.attribute.from)*Y}}else if(t.startTime+t.duration<r)switch(t.attribute.attrName){case"fill":case"stroke":if(t.type===n.default.actionTargets.mark)if(Array.isArray(t.attribute.to)){for(var Q=0;Q<t.attribute.to.length;Q++)if(t.attribute.to[Q][0]===e&&"string"==typeof t.attribute.to[Q][1]){a=t.attribute.to[Q][1];break}}else a=this.finalStatus.get(e)[i][t.attribute.attrName];break;case"textContent":if(t.type===n.default.actionTargets.mark&&Array.isArray(t.attribute.to)){for(var J=0,Z=0;Z<t.attribute.to.length;Z++)if(t.attribute.to[Z][0]===e&&(!isNaN(t.attribute.to[Z][1])||"string"==typeof t.attribute.to[Z][1])){J=t.attribute.to[Z][1];break}a=J}break;case"width":case"height":case"r":if(t.type===n.default.actionTargets.mark)if(Array.isArray(t.attribute.to)){for(var K=0,W=0;W<t.attribute.to.length;W++)if(t.attribute.to[W][0]===e){K=t.attribute.to[W][1];break}a=K}else a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);else a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);break;case"y":case"y1":case"y2":case"cy":if(t.type===n.default.actionTargets.mark)if(Array.isArray(t.attribute.to)){for(var $=0,tt=0;tt<t.attribute.to.length;tt++)if(t.attribute.to[tt][0]===e){$=t.attribute.to[tt][1];break}a=$}else a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);else t.type===n.default.actionTargets.mask&&(a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName])+parseFloat(this.finalStatus.get(e)[i].height));break;case"x":case"x1":case"x2":case"cx":if(t.type===n.default.actionTargets.mark)if(Array.isArray(t.attribute.to)){for(var et=0,rt=0;rt<t.attribute.to.length;rt++)if(t.attribute.to[rt][0]===e){et=t.attribute.to[rt][1];break}a=et}else a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]);else t.type===n.default.actionTargets.mask&&(a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName])+parseFloat(this.finalStatus.get(e)[i].height));break;case"startAngle":case"innerRadius":a={cx:parseFloat(this.finalStatus.get(e)[i].cx),cy:parseFloat(this.finalStatus.get(e)[i].cy),innerRadius:parseFloat(this.finalStatus.get(e)[i].innerRadius),outterRadius:parseFloat(this.finalStatus.get(e)[i].outterRadius),startAngle:parseFloat(this.finalStatus.get(e)[i].startAngle),endAngle:parseFloat(this.finalStatus.get(e)[i].endAngle)};break;default:void 0!==this.finalStatus.get(e)[i]&&(a=parseFloat(this.finalStatus.get(e)[i][t.attribute.attrName]))}return a}},{key:"calRatio",value:function(t,e){var r=0;switch(e){case n.default.easingType.easeLinear:r=t;break;case n.default.easingType.easeInQuad:r=this.easeFuncs.easeInQuad(t);break;case n.default.easingType.easeOutQuad:r=this.easeFuncs.easeOutQuad(t);break;case n.default.easingType.easeInOutQuad:r=this.easeFuncs.easeInOutQuad(t);break;case n.default.easingType.easeInCubic:r=this.easeFuncs.easeInCubic(t);break;case n.default.easingType.easeOutCubic:r=this.easeFuncs.easeOutCubic(t);break;case n.default.easingType.easeInOutCubic:r=this.easeFuncs.easeInOutCubic(t);break;case n.default.easingType.easeOutBounce:r=this.easeFuncs.easeOutBounce(t)}return r}},{key:"resetAll",value:function(){this.wholeEndTime=0,this.allMarkAni.clear(),this.minStatus.clear(),this.finalStatus.clear(),this.frames.clear()}}],(c=[{key:"translate",value:function(t,e){if(this.checkFormat(t)&&(this.chartIdx=t.chartIdx,this.selection=t.selection,this.reference=t.reference,this.offset=t.offset,void 0!==t.grouping&&this.grouping.initGrouping(t.grouping),void 0!==t.actions))for(var r,i=0;i<t.actions.length|(r=t.actions[i]);i++){r.chartIdx=t.chartIdx;for(var o,s=n.default.transToVisualAttrAction(r,t.chartIdx,e,a.default.dataTrans),u=0;u<s.length|(o=s[u]);u++){var l=new n.default;l.initAction(o),this.actions.push(l)}}}},{key:"checkFormat",value:function(t){return!!Object.keys(t).includes("selection")||(alert("illegal format, no 'selection' is defined "),!1)}},{key:"calAniTime",value:function(t,r){for(var a,i=this,o=new Map,s=0;s<t.length|(a=t[s]);s++){for(var u,l=new Map,c=0;c<this.actions.length|(u=this.actions[c]);c++)if("object"===d(u.duration)){var p=this.domMarks.get(a)["data-datum"],m=parseFloat(p[u.duration.field]),g=void 0===u.duration.minDuration?300:u.duration.minDuration;l.set(u.duration.field,[m,g])}o.set(a,l)}for(var y,v=h(n.default.calActionDuration(this.actions,o,this.domMarks),3),b=v[0],k=v[1],T=v[2],A=this.grouping.arrangeOrder(t,this.domMarks),w=new Map,S=new Map,x=0;x<A.length|(y=A[x]);x++){for(var M,E={},N=0;N<e.visualAttrs.length|(M=e.visualAttrs[N]);N++){if(void 0===this.domMarks.get(y)[M])switch(M){case"opacity":E[M]=1;break;case"width":E[M]=this.domMarks.get(y).bbWidth;break;case"height":E[M]=this.domMarks.get(y).bbHeight;break;case"x":E[M]=this.domMarks.get(y).bbX;break;case"y":E[M]=this.domMarks.get(y).bbY;break;case"cx":E[M]=this.domMarks.get(y).bbX+this.domMarks.get(y).bbWidth/2;break;case"cy":E[M]=this.domMarks.get(y).bbY+this.domMarks.get(y).bbHeight/2;break;case"innerRadius":E[M]=0;break;case"outterRadius":E[M]=Math.sqrt(Math.pow(this.domMarks.get(y).bbWidth/2,2)+Math.pow(this.domMarks.get(y).bbHeight/2,2));break;case"startAngle":E[M]=0;break;case"endAngle":E[M]=2*Math.PI}else E[M]=this.domMarks.get(y)[M];""!==E[M]&&(void 0===e.minStatus.get(M)?e.minStatus.set(M,E[M]):parseFloat(e.minStatus.get(M))>parseFloat(E[M])&&e.minStatus.set(M,E[M]))}void 0===e.finalStatus.get(y)&&e.finalStatus.set(y,[]),e.finalStatus.get(y).push(E),w.set(y,{startTime:0,totalDuration:b.get(y),actionAttrs:[]}),S.set(y,"allMarks")}this.grouping.calTimeInGrouping(w,this.domMarks);var F=1e4;w.forEach((function(t,e){t.startTime<F&&(F=t.startTime)}));var I=void 0===r?this.calOffsetTime(0,0,F,this.domMarks):this.calOffsetTime(r.animationStartTime,r.animationEndTime,F,this.domMarks);w.forEach((function(t,e){var r={startTime:t.startTime+I.get(e),totalDuration:t.totalDuration,actionAttrs:[]};r.startTime<i.animationStartTime&&(i.animationStartTime=r.startTime),r.startTime+r.totalDuration>i.animationEndTime&&(i.animationEndTime=r.startTime+r.totalDuration);for(var a,o=0;o<T.length|(a=T[o]);o++){for(var s,u=new n.default,l=Object.keys(a),c=0;c<l.length|(s=l[c]);c++)if(u[s]=a[s],"_duration"===s&&"object"===d(a[s])){var f=i.domMarks.get(e)["data-datum"],h=k.get(a[s].field);u[s]=a[s].minDuration*parseFloat(f[a[s].field])/h}else"offsetStart"===s&&(u[s]=a[s].get(e));r.actionAttrs.push(u)}w.set(e,r)})),w.forEach((function(t,r){for(var a=0;a<t.actionAttrs.length;a++)t.actionAttrs[a].startTime=t.startTime+t.actionAttrs[a].offsetStart;if(void 0===e.allMarkAni.get(r))e.allMarkAni.set(r,t);else{var n=e.allMarkAni.get(r).startTime,i=n+e.allMarkAni.get(r).totalDuration;e.allMarkAni.get(r).startTime=n<t.startTime?n:t.startTime;var o=t.startTime+t.totalDuration;i=i>o?i:o,e.allMarkAni.get(r).totalDuration=i-e.allMarkAni.get(r).startTime,e.allMarkAni.get(r).actionAttrs=[].concat(f(e.allMarkAni.get(r).actionAttrs),f(t.actionAttrs))}}))}}])&&p(r.prototype,c),y&&p(r,y),e}(o.default);y.visualAttrs=["x","y","cx","cy","innerRadius","outterRadius","startAngle","endAngle","width","height","opacity","fill","stroke","content","stroke-dasharray","stroke-dashoffset"],y.startY=0,y.startX=0,y.endX=0,y.wholeEndTime=0,y.minStatus=new Map,y.finalStatus=new Map,y.allMarkAni=new Map,y.frames=new Map,y.easeFuncs={easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return t/2<1?.5*t*t:-(--t*(t-2)-1)/2},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?t*t*t/2:((t-=2)*t*t+2)/2},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}};var v=y;e.default=v,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,n=r(1),i=(a=r(5))&&a.__esModule?a:{default:a},o=r(2);function s(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.source=r}var e,r,a;return e=t,a=[{key:"chartPreProcessing",value:function(t){for(var e=[],r=0;r<t.length;r++){var a=t[r];if(void 0!==a.start&&void 0!==a.end){var n=parseInt(a.start),i=parseInt(a.end);if(i<n){console.log("wrong start and end file index ");continue}for(var o=a.source.split("/"),s=void 0===a.id?o[o.length-1]:a.id,u=n;u<=i;u++)e.push({id:s+u,source:a.source+u+".dsvg"})}else e.push(a)}return e}},{key:"loadCharts",value:function(e,r){var a=new Map;t.charts=[];for(var n=[],i=0,o=0,s=0;s<e.length;s++){var u=new XMLHttpRequest,l="file:"===document.location.protocol?0:200,c=void 0;if(u.open("GET",e[s].source,!1),u.overrideMimeType("text/html;charset=utf-8"),u.send(null),u.status===l){var f=document.createElement("div");f.innerHTML=u.responseText,c=f.children[0],i=parseFloat(c.getAttribute("width")),o=parseFloat(c.getAttribute("height")),t.charts.push(c),a.set(e[s].id,t.charts.length-1)}else 404===u.status&&(n.unshift(s),console.log("can not find "+e[s].source+" ! Please check the url."))}for(var h=0;h<n.length;h++)e.slice(n[h],1);void 0!==r?t.facetViews(a,r):this.viewport.setViewport(i,o)}},{key:"removeTransAndMerge",value:function(){for(var e=0;e<t.charts.length;e++)t.charts[e].setAttribute("trans","0,0"),t.removeTransitions(t.charts[e].children[0]);return t.mergeCharts()}},{key:"facetViews",value:function(e,r){if(r.views.length>0){for(var a=[],n=0;n<r.views[0].frames.length;n++){for(var i=[],o=0;o<r.views.length;o++){var s=r.views[o].frames[n];void 0!==e.get(s)?i.push(t.charts[e.get(s)].cloneNode(!0)):console.log("chart name "+s+" is undefined !")}i.length===r.views.length&&a.push(i)}t.combineCharts(r.type,r.views.length,a)}}},{key:"combineCharts",value:function(e,r,a){for(var o=[],s=0,u=0,l=0;l<a.length;l++){var c=a[l];s=parseFloat(c[0].getAttribute("width")),u=parseFloat(c[0].getAttribute("height"));var f=c[0].getAttribute("viewBox").split(" "),h=parseFloat(f[2]),d=parseFloat(f[3]),p=n.Util.getTransformAttrs(c[0].children[0]);switch(c[0].children[0].setAttribute("transform","translate("+p.transNums[0]+","+p.transNums[1]+") scale("+p.scaleNum/r+")"),e){case i.default.facetType.row:u+=20*c.length,c[0].setAttribute("height",u),c[0].setAttribute("viewBox","0 0 "+h+" "+(d+20*c.length));break;case i.default.facetType.col:s+=20*c.length,c[0].setAttribute("width",s),c[0].setAttribute("viewBox","0 0 "+(h+20*c.length)+" "+d)}for(var m=function(t){var r=c[t],a=r.querySelectorAll(".mark");if([].forEach.call(a,(function(e){var r=parseInt(e.getAttribute("id").substring(4));e.setAttribute("id","mark"+(r+1e5*t)),e.classList.add("facet"+t)})),t>0)for(var o=r.children[0].children,s=0;s<o.length;s++){var u=o[s],l=n.Util.getTransformAttrs(u);switch(e){case i.default.facetType.row:u.setAttribute("transform","translate("+l.transNums[0]+","+(l.transNums[1]+(d+20)*t)+") scale("+l.scaleNum+")");break;case i.default.facetType.col:u.setAttribute("transform","translate("+(l.transNums[0]+(h+20)*t)+","+l.transNums[1]+") scale("+l.scaleNum+")")}c[0].children[0].appendChild(u)}},g=0;g<c.length;g++)m(g);o.push(c[0])}t.charts=o,this.viewport.setViewport(s,u)}},{key:"mergeCharts",value:function(){for(var e=new Set,r=new Map,a=new Map,i=["x","y","cx","cy","x1","y1","x2","y2","d","r","width","height","textContent","fill","stroke"],o={},s=0;s<i.length;s++)o[i[s]]=null;for(var u=function(n){var s=t.charts[n].querySelectorAll(".mark");s.length>0&&[].forEach.call(s,(function(s){var u=s.getAttribute("id");e.add(u);for(var l={},c=0;c<i.length;c++)l[i[c]]="textContent"===i[c]?s.innerHTML:s.getAttribute(i[c]);void 0===r.get(u)&&r.set(u,new Array(t.charts.length).fill(o)),r.get(u)[n]=l,a.set(u,s.outerHTML)}))},l=0;l<t.charts.length;l++)u(l);t.changedAttrs=[];var c=n.Util.deepClone(i);r.forEach((function(e,r){for(var a=0;a<c.length;a++){for(var n=!0,i=void 0,o=0;o<e.length;o++)if(void 0!==e[o]){i=e[o];break}for(var s=0;s<e.length;s++)if(void 0!==e[s]&&e[s][c[a]]!==i[c[a]]){t.changedAttrs.push(c[a]),n=!1;break}if(!n){c.splice(a,1);break}}}));var f=new Map;for(t.changedAttrs.indexOf("d")>=0&&(f=n.Util.findDiffCmds(r)),e=Array.from(e),t.markDoms.clear(),l=0;l<t.charts.length;l++)for(var h=0;h<e.length;h++)if(0===t.charts[l].querySelectorAll("#"+e[h]).length){var d=a.get(e[h]),p=document.createElement("div");p.innerHTML=d;for(var m=p.children[0],g={},y=0;y<t.changedAttrs.length;y++)if("y"===t.changedAttrs[y]&&t.changedAttrs.indexOf("height")>=0){var v=(m.getAttribute("y")?parseFloat(m.getAttribute("y")):0)+(m.getAttribute("height")?parseFloat(m.getAttribute("height")):0);m.setAttribute("y",v),g.y=v}else if("d"===t.changedAttrs[y]){var b=void 0;m.getAttribute("d")&&(b=n.Util.setPathDValue(m.getAttribute("d"),!0,0,0,f)),m.setAttribute("d",b),g.d=b}else"textContent"===t.changedAttrs[y]?(m.innerHTML="",g.textContent=""):"fill"===t.changedAttrs[y]||"stroke"===t.changedAttrs[y]?(void 0===m.getAttribute(t.changedAttrs[y])&&m.setAttribute(t.changedAttrs[y],"#FFFFFF"),g[t.changedAttrs[y]]=m.getAttribute(t.changedAttrs[y])):["x","y","cx","cy","x1","y1","x2","y2"].includes(t.changedAttrs[y])?"x2"===t.changedAttrs[y]?(m.setAttribute("x2",parseFloat(m.getAttribute("x1"))),g.x2=parseFloat(m.getAttribute("x1"))):"y2"===t.changedAttrs[y]?(m.setAttribute("y2",parseFloat(m.getAttribute("y1"))),g.y2=parseFloat(m.getAttribute("y1"))):g[t.changedAttrs[y]]=parseFloat(m.getAttribute(t.changedAttrs[y])):(m.setAttribute(t.changedAttrs[y],0),g[t.changedAttrs[y]]=0);d='<svg xmlns="http://www.w3.org/2000/svg" width="500" height="500">'+m.outerHTML+"</svg>";var k=(new DOMParser).parseFromString(d,"image/svg+xml").lastChild.children[0];t.charts[l].querySelector("#chartContent").appendChild(k),r.get(e[h])[l]=g}t.dataTrans=new Map;for(var T=0;T<e.length;T++){for(var A=r.get(e[T]),w=[],S=0;S<A.length;S++){for(var x={},M=0;M<t.changedAttrs.length;M++)x[t.changedAttrs[M]]=A[S][t.changedAttrs[M]];w.push(x)}t.dataTrans.set(e[T],w),t.charts[0].querySelector("#"+e[T]).setAttribute("data-transition",JSON.stringify({dataTrans:w},null,"\t"))}return t.charts[0]}},{key:"getBBoxes",value:function(){var t=document.getElementById("chartContainer").children[0].querySelectorAll('[id^="mark"]'),e=new Map;return t.length>0&&[].forEach.call(t,(function(t){var r,a=t.getAttribute("id");"text"===t.tagName?(r=t.getBBox()).width+=10:r=t.getBBox(),e.set(a,r)})),e}},{key:"removeTransitions",value:function(e){var r=e.getAttribute("transform"),a=e.parentNode.getAttribute("trans").split(",");if(r){r=(r=r.replace(/translate|scale|rotate|\s/g,(function(t){return" "===t?"":"@"+t}))).replace(/(^@*)|(@*$)/g,"").split("@");for(var i="",o="",s=0;s<r.length;s++)r[s].indexOf("translate")>=0?o=r[s]:r[s].indexOf("scale")>=0&&(i=r[s]);var u=o.replace(/translate\(| |\)/g,"").split(",");e.setAttribute("transform",i),"g"===e.tagName?e.setAttribute("trans",parseFloat(u[0])+parseFloat(a[0])+","+(parseFloat(u[1])+parseFloat(a[1]))):n.Util.transShape(e,parseFloat(u[0])+parseFloat(a[0]),parseFloat(u[1])+parseFloat(a[1]))}else"g"===e.tagName?e.setAttribute("trans",a.join(",")):n.Util.transShape(e,parseFloat(a[0]),parseFloat(a[1]));if(e.children.length>0)for(var l=0;l<e.children.length;l++)t.removeTransitions(e.children[l])}},{key:"addLottieMarkLayers",value:function(e){if("g"!==e.tagName&&"svg"!==e.tagName&&(console.log(e.tagName),e.classList.contains("mark")?o.globalVar.markLayers.set(e.getAttribute("id"),o.globalVar.jsMovin.addLayer(e)):o.globalVar.jsMovin.addLayer(e)),e.children.length>0)for(var r=0;r<e.children.length;r++)t.addLottieMarkLayers(e.children[r])}}],(r=null)&&s(e.prototype,r),a&&s(e,a),t}();u.charts=[],u.changedAttrs=[],u.viewport=new n.Viewport,u.dataTrans=new Map,u.markDoms=new Map;var l=u;e.default=l,t.exports=e.default},function(t,e,r){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._type,this._views,this.views=r,this.type=e}var e,r,n;return e=t,(r=[{key:"type",set:function(e){void 0!==e&&(Object.keys(t.facetType).includes(e)?this._type=e:(console.log('the facet type has to be one of "row" or "column", setting to default value "column".'),this._type=t.facetType.col))},get:function(){return this._type}},{key:"views",set:function(t){if(void 0!==t){for(var e=t.map((function(t){if(void 0!==t.range){var e=new RegExp("\\d+$"),r=t.range[0].replace(e,""),a=t.range[1].replace(e,""),n=t.range[0].match(e),i=t.range[1].match(e);if(r===a){t.frames=[];for(var o=n;o<=i;o++)t.frames.push(r+o)}else t.frames=[t.range[0],t.range[1]],console.log("range start and end mismatch")}return t})),r=0,a=0;a<e.length;a++)e[a].frames.length>r&&(r=e[a].frames.length);for(var n=0;n<e.length;n++)if(e[n].frames.length<r)for(var i=e[n].frames[e[n].frames.length-1],o=r-e[n].frames.length;o>0;)e[n].frames.push(i),o--;this._views=e}},get:function(){return this._views}}])&&a(e.prototype,r),n&&a(e,n),t}();n.facetType={row:"row",col:"column"};var i=n;e.default=i,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"LayerFactory",{enumerable:!0,get:function(){return a.LayerFactory}}),Object.defineProperty(e,"EasingFactory",{enumerable:!0,get:function(){return n.EasingFactory}}),e.MaskType=e.default=void 0;var a=r(9),n=r(7);function i(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o,s=function(){function t(){var e,r,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=void 0,(r="root")in(e=this)?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,this.root={fr:n,w:i,h:o,ddd:0,layers:[],assets:[],fonts:{list:[]},ip:0,op:0}}var e,r,n;return e=t,(r=[{key:"setFrameRate",value:function(t){this.root.fr=t}},{key:"setViewport",value:function(t,e){this.root.w=t,this.root.h=e}},{key:"addLayer",value:function(t){var e;return e=t instanceof SVGGraphicsElement?a.LayerFactory.hierarchy(t,this.root.assets,this.root.fonts):t,this.root.layers.push(e.root),e}},{key:"addMask",value:function(t,e){var r,n,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.Alpha;if(e instanceof a.JSMovinLayer?(r=e,n=this.root.layers.indexOf(r.root),r.root.tt=s):(n=e,this.root.layers[n].tt=s),n<0)throw new Error("Given layer is not a member of this JSMovin.");i=t instanceof SVGGraphicsElement?a.LayerFactory.hierarchy(t,this.root.assets,this.root.fonts):t,this.root.layers.splice(n,0,i.root)}},{key:"removeLayer",value:function(t){var e,r;t instanceof a.JSMovinLayer?(e=t,r=this.root.layers.indexOf(e.root)):r=t,this.root.layers.splice(r,1)}},{key:"removeMask",value:function(t){var e,r;if(t instanceof a.JSMovinLayer?(e=t,r=this.root.layers.indexOf(e.root)):(r=t,e=new a.JSMovinLayer(this.root.layers[r])),e.root.tt)e.root.tt=0,this.root.layers.splice(r-1,1);else{if(!this.root.layers[r+1].tt)throw new Error("The input layer is not a mask or a masked layer.");this.root.layers[r+1].tt=0,this.root.layers.splice(r,1)}}},{key:"clearLayers",value:function(){this.root.layers=[]}},{key:"uniform",value:function(){var t=this.root.layers.reduce((function(t,e){return t<e.op?e.op:t}),0);this.root.op=t,this.root.layers.forEach((function(e){return e.op=t}))}},{key:"toObject",value:function(){return this.uniform(),JSON.parse(this.toJSON())}},{key:"toJSON",value:function(){return this.uniform(),JSON.stringify(this.root)}}])&&i(e.prototype,r),n&&i(e,n),t}();e.default=s,e.MaskType=o,function(t){t[t.Alpha=1]="Alpha",t[t.InvertAlpha=2]="InvertAlpha",t[t.Luma=3]="Luma",t[t.InvertLuma=4]="InvertLuma"}(o||(e.MaskType=o={}))},function(t,e,r){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.EasingFactory=void 0;var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"linear",value:function(){return[[[1],[1]],[[0],[0]]]}}],(r=null)&&a(e.prototype,r),n&&a(e,n),t}();e.EasingFactory=n},function(t,e,r){var a=r(0),n=r(3),i=r(19),o=r(20);window.aniChart={frameRate:a.FRAME_RATE,duration:function(){return n.wholeEndTime},loadSpec:function(t,e){i.loadSpec(t,e)},renderSpec:function(t){var e=new i;e.init(t),e.render()},play:function(){o.play()},renderFrame:function(t){return o.renderFrame(t)},reset:function(){o.resetCover(),n.resetAll()},test:function(t){console.log("this is a test! ",t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerFactory=e.JSMovinLayer=void 0;var a=r(7),n=r(10);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],a=!0,n=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(t){n=!0,i=t}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}var c=function(){function t(e){var r,a,n;s(this,t),n=void 0,(a="root")in(r=this)?Object.defineProperty(r,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[a]=n,this.root=e}return l(t,[{key:"getDefaultProperty",value:function(t){switch(t){case"a":case"p":return[0,0,0];case"s":return[100,100,100];case"o":return 100;case"r":default:return 0}}},{key:"convertToStaticProperty",value:function(t,e){if(t[e]||(t[e]={a:0,k:this.getDefaultProperty(e)}),1==t[e].a){var r=t[e].k[0].s;t[e]={a:0,k:r}}}},{key:"convertToAnimatableProperty",value:function(t,e){t[e]&&0!=t[e].a||(t[e]={a:1,k:[]})}},{key:"addKeyframe",value:function(t,e){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=t[e].k.filter((function(t){return t.t==n}));if(s.length)r=s[0];else{r={t:n,s:this.getDefaultProperty(e)};var u=t[e].k.reduce((function(t,e){return e.t<n?t+1:t}),0);t[e].k.splice(u,0,r)}o&&(r.o={x:o[0][0],y:o[0][1]},r.i={x:o[1][0],y:o[1][1]}),a>=0?r.s[a]=i:r.s=[i]}}]),l(t,[{key:"setStaticProperty",value:function(t,e){switch(this.root.op=1,t){case"scaleX":this.convertToStaticProperty(this.root.ks,"s"),this.root.ks.s.k[0]=e;break;case"scaleY":this.convertToStaticProperty(this.root.ks,"s"),this.root.ks.s.k[1]=e;break;case"anchorX":this.convertToStaticProperty(this.root.ks,"a"),this.root.ks.a.k[0]=e;break;case"anchorY":this.convertToStaticProperty(this.root.ks,"a"),this.root.ks.a.k[1]=e;break;case"x":this.convertToStaticProperty(this.root.ks,"p"),this.root.ks.p.k[0]=e;break;case"y":this.convertToStaticProperty(this.root.ks,"p"),this.root.ks.p.k[1]=e;break;case"rotate":this.convertToStaticProperty(this.root.ks,"r"),this.root.ks.r.k=e;break;case"opacity":this.convertToStaticProperty(this.root.ks,"o"),this.root.ks.o.k=e;break;default:throw console.error(t,e),new Error("Not a valid key.")}}},{key:"setAnimatableProperty",value:function(t,e,r,n,i,o){if(r<=e)throw new Error("End frame should be larger than start frame.");switch(this.root.op=r,o||(o=a.EasingFactory.linear()),t){case"scaleX":this.convertToAnimatableProperty(this.root.ks,"s"),this.addKeyframe(this.root.ks,"s",0,e,n,o),this.addKeyframe(this.root.ks,"s",0,r,i);break;case"scaleY":this.convertToAnimatableProperty(this.root.ks,"s"),this.addKeyframe(this.root.ks,"s",1,e,n,o),this.addKeyframe(this.root.ks,"s",1,r,i);break;case"anchorX":this.convertToAnimatableProperty(this.root.ks,"a"),this.addKeyframe(this.root.ks,"a",0,e,n,o),this.addKeyframe(this.root.ks,"a",0,r,i);break;case"anchorY":this.convertToAnimatableProperty(this.root.ks,"a"),this.addKeyframe(this.root.ks,"a",1,e,n,o),this.addKeyframe(this.root.ks,"a",1,r,i);break;case"x":this.convertToAnimatableProperty(this.root.ks,"p"),this.addKeyframe(this.root.ks,"p",0,e,n,o),this.addKeyframe(this.root.ks,"p",0,r,i);break;case"y":this.convertToAnimatableProperty(this.root.ks,"p"),this.addKeyframe(this.root.ks,"p",1,e,n,o),this.addKeyframe(this.root.ks,"p",1,r,i);break;case"rotate":this.convertToAnimatableProperty(this.root.ks,"r"),this.addKeyframe(this.root.ks,"r",-1,e,n,o),this.addKeyframe(this.root.ks,"r",-1,r,i);break;case"opacity":this.convertToAnimatableProperty(this.root.ks,"o"),this.addKeyframe(this.root.ks,"o",-1,e,n,o),this.addKeyframe(this.root.ks,"o",-1,r,i);break;default:throw console.error(t,e,r,n,i,o),new Error("Not a valid key.")}}}]),t}();e.JSMovinLayer=c;var f=function(){function t(){s(this,t)}return l(t,null,[{key:"generateTransform",value:function(t){return{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[t[0],t[1],0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}}}},{key:"getBoundingBox",value:function(t){for(var e=t;e.parentElement instanceof SVGGraphicsElement;)e=e.parentElement;var r=e.getBoundingClientRect(),a=t.getBoundingClientRect();return[a.left-r.left,a.top-r.top,a.width+1,a.height+1]}},{key:"boundingBox",value:function(t){var e=this.getBoundingBox(t);return this.rect.apply(this,o(e))}},{key:"shape",value:function(t){var e=this.getBoundingBox(t),r={ty:4,ddd:0,sr:1,ao:0,ks:this.generateTransform(e),ip:0,op:1,st:0,bm:0,shapes:[(0,n.render)(t)]};return new c(r)}},{key:"rect",value:function(t,e,r,a){var i={ty:4,ddd:0,sr:1,ao:0,ks:this.generateTransform([t,e,r,a]),ip:0,op:1,st:0,bm:0,shapes:[(0,n.renderPlainGlyph)("rect",[r,a])]};return new c(i)}},{key:"ellipse",value:function(t,e,r,a){var i={ty:4,ddd:0,sr:1,ao:0,ks:this.generateTransform([t-r,e-a,2*r,2*a]),ip:0,op:1,st:0,bm:0,shapes:[(0,n.renderPlainGlyph)("ellipse",[r,a])]};return new c(i)}},{key:"hierarchy",value:function(t,e,r){var a,o=this.getBoundingBox(t),s={ty:a=t instanceof SVGTextElement?5:t instanceof SVGImageElement?2:4,ddd:0,sr:1,ao:0,ks:this.generateTransform(o),ip:0,op:1,st:0,bm:0};switch(a){case 2:if(e){var u=s,l=i((0,n.renderImage)(t),2),f=l[0],h=l[1];u.refId=f,e.push(h)}break;case 4:var d=s;d.shapes=[],d.shapes.push((0,n.render)(t));break;case 5:var p=s,m=i((0,n.renderText)(t),2),g=m[0],y=m[1];p.t=g,r.list.push(y)}return new c(s)}}]),t}();e.LayerFactory=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.render=u,e.renderPlainGlyph=function(t,e){var r={ty:"gr",it:[{ty:"sh",ks:{k:null,a:0},hd:!1},{ty:"fl",c:{k:[1,1,1,1]},o:{k:100}},{ty:"tr",p:{k:[0,0]},a:{k:[0,0]},s:{k:[100,100]},r:{k:0},o:{k:100},sk:{k:0},sa:{k:0}}],bm:0,hd:!1},a=new n.PathMaker;switch(t){case"rect":a.moveTo(0,0),a.lineTo(e[0],0),a.lineTo(e[0],e[1]),a.lineTo(0,e[1]),a.closePath();break;case"ellipse":a.moveTo(e[0],0),a.arcTo(e[0],e[1],0,1,0,e[0],2*e[1]),a.arcTo(e[0],e[1],0,1,0,e[0],0),a.closePath()}return a.uniform(),r.it[0].ks.k=a.path,r},e.renderText=function(t){var e=getComputedStyle(t),r=parseFloat(e.fontSize),a=e.fontFamily.split(",")[0].trim(),n=e.fontStyle,i="".concat(a,"-").concat(n),o=parseFloat(e.lineHeight||"".concat(r)),s=(e.color||"rgb(0,0,0)").split("(")[1].split(")")[0].split(",").map((function(t){return parseInt(t)/255}));return[{d:{k:[{t:0,s:{s:r,f:i,t:t.innerHTML,j:0,tr:0,lh:o,ls:0,fc:s}}]},p:{},m:{},a:[]},{origin:0,fPath:"",fClass:"",fFamily:a,fWeight:"",fStyle:n,fName:i,ascent:o}]},e.renderImage=function(t){var e=(0,i.default)(),r=t.height.baseVal;r.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);var a=t.width.baseVal;a.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);var n=document.createElement("canvas"),o=n.getContext("2d");n.width=a.valueInSpecifiedUnits,n.height=r.valueInSpecifiedUnits,o.drawImage(t,0,0);var s=n.toDataURL(),u={h:r.valueInSpecifiedUnits,w:a.valueInSpecifiedUnits,id:(0,i.default)(),u:s,e:1};return[e,u]};var a,n=r(11),i=(a=r(12))&&a.__esModule?a:{default:a},o=r(15);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],a=!0,n=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(t){n=!0,i=t}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t){return t instanceof SVGTextElement||t instanceof SVGImageElement?{}:t instanceof SVGGElement?function(t){var e={ty:"gr",it:[],nm:t.id,bm:0,hd:!1};return t.childNodes.forEach((function(t){if(t instanceof SVGGraphicsElement){var r=u(t);r.ty&&e.it.push(r)}})),e}(t):function(t){var e={ty:"gr",it:[],bm:0,hd:!1},r=function(r){r.uniform(),e.it.push({ty:"sh",ks:{k:r.path,a:0},nm:t.id,hd:!1});var a=window.getComputedStyle(t);!function(t,e){e.stroke&&"none"!==e.stroke&&t.push({ty:"st",c:{k:e.stroke.split("(")[1].split(")")[0].split(",").slice(0,3).map((function(t){return parseInt(t)/255})).concat(1)},o:{k:100*parseFloat(e.strokeOpacity||"1")},w:{k:parseFloat(e.strokeWidth||"1")},lc:l(e.strokeLinecap),lj:c(e.strokeLinejoin)});e.fill&&"none"!==e.fill&&t.push({ty:"fl",c:{k:e.fill.split("(")[1].split(")")[0].split(",").slice(0,3).map((function(t){return parseInt(t)/255})).concat(1)},o:{k:100*parseFloat(e.fillOpacity||"1")}});t.push({ty:"tr",p:{k:[0,0]},a:{k:[0,0]},s:{k:[100,100]},r:{k:0},o:{k:100},sk:{k:0},sa:{k:0}})}(e.it,a)};if(t instanceof SVGCircleElement){var a=t.r.baseVal;a.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);var i=a.valueInSpecifiedUnits,u=new n.PathMaker;u.moveTo(i,0),u.arcTo(i,i,0,1,0,i,2*i),u.arcTo(i,i,0,1,0,i,0),u.closePath(),r(u)}else if(t instanceof SVGEllipseElement){var f=s(["rx","ry"].map((function(e){var r=t[e].baseVal;return r.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),r.valueInSpecifiedUnits})),2),h=f[0],d=f[1],p=new n.PathMaker;p.moveTo(h,0),p.arcTo(h,d,0,1,0,h,2*d),p.arcTo(h,d,0,1,0,h,0),p.closePath(),r(p)}else if(t instanceof SVGLineElement){var m=s(["x1","x2","y1","y2"].map((function(e){var r=t[e].baseVal;return r.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),r.valueInSpecifiedUnits})),4),g=m[0],y=m[1],v=m[2],b=m[3],k=Math.min(g,y),T=Math.min(v,b),A=new n.PathMaker;A.moveTo(g-k,v-T),A.lineTo(y-k,b-T),r(A)}else if(t instanceof SVGPathElement){var w,S=t.getAttribute("d")||"",x=(0,o.parseSVG)(S),M=new n.PathMaker;x.forEach((function(t){switch(t.code){case"M":w=t,M.moveTo(w.x,w.y);break;case"L":w=t,M.lineTo(w.x,w.y);break;case"l":w=t,M.lineToRelative(w.x,w.y);break;case"H":w=t,M.horizontalTo(w.x);break;case"h":w=t,M.horizontalToRelative(w.x);break;case"V":w=t,M.verticalTo(w.y);break;case"v":w=t,M.verticalToRelative(w.y);break;case"C":w=t,M.cubicBezierCurveTo(w.x1,w.y1,w.x2,w.y2,w.x,w.y);break;case"c":w=t,M.cubicBezierCurveToRelative(w.x1,w.y1,w.x2,w.y2,w.x,w.y);break;case"Q":w=t,M.quadraticBezierCurveTo(w.x1,w.y1,w.x,w.y);break;case"q":w=t,M.quadraticBezierCurveToRelative(w.x1,w.y1,w.x,w.y);break;case"A":w=t,M.arcTo(w.rx,w.ry,w.xAxisRotation,~~w.largeArc,~~w.sweep,w.x,w.y);break;case"a":w=t,M.arcToRelative(w.rx,w.ry,w.xAxisRotation,~~w.largeArc,~~w.sweep,w.x,w.y);break;case"Z":case"z":M.closePath();break;default:throw console.error(t),new Error("No implementation found for this path command.")}})),r(M)}else if(t instanceof SVGPolygonElement||t instanceof SVGPolylineElement){var E=t.points;if(E.length){var N=Array.prototype.slice.call(E),F=N.reduce((function(t,e){return Math.min(t,e.x)}),0),I=N.reduce((function(t,e){return Math.min(t,e.y)}),0),O=new n.PathMaker;O.moveTo(E[0].x-F,E[0].y-I),N.forEach((function(t,e){e<=0||O.lineTo(t.x-F,t.y-I)})),t instanceof SVGPolygonElement&&O.closePath(),r(O)}}else{if(!(t instanceof SVGRectElement))throw console.error(t),new Error("No implementation found for svg graphics element.");var C=s(["width","height"].map((function(e){var r=t[e].baseVal;return r.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX),r.valueInSpecifiedUnits})),2),P=C[0],R=C[1],_=new n.PathMaker;_.moveTo(0,0),_.lineTo(P,0),_.lineTo(P,R),_.lineTo(0,R),_.closePath(),r(_)}return e}(t)}function l(t){switch(t){case"square":return 3;case"butt":return 1;default:return 2}}function c(t){switch(t){case"miter":return 1;case"bevel":return 3;default:return 2}}},function(t,e,r){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.PathMaker=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"path",{c:!1,i:[],o:[],v:[]}),n(this,"currentX",0),n(this,"currentY",0)}var e,r,i;return e=t,i=[{key:"a2c",value:function(t,e,r,a,n,i,o,s,u,l){var c,f=120*Math.PI/180,h=Math.PI/180*(+n||0),d=[],p=function(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}};if(!r||!a)return[t,e,s,u,s,u];if(l)w=l[0],S=l[1],T=l[2],A=l[3];else{t=(c=p(t,e,-h)).x,e=c.y,s=(c=p(s,u,-h)).x,u=c.y,Math.cos(Math.PI/180*n),Math.sin(Math.PI/180*n);var m=(t-s)/2,g=(e-u)/2,y=m*m/(r*r)+g*g/(a*a);y>1&&(r*=y=Math.sqrt(y),a*=y);var v=r*r,b=a*a,k=(i==o?-1:1)*Math.sqrt(Math.abs((v*b-v*g*g-b*m*m)/(v*g*g+b*m*m))),T=k*r*g/a+(t+s)/2,A=k*-a*m/r+(e+u)/2,w=Math.asin((e-A)/a),S=Math.asin((u-A)/a);w=t<T?Math.PI-w:w,S=s<T?Math.PI-S:S,w<0&&(w=2*Math.PI+w),S<0&&(S=2*Math.PI+S),o&&w>S&&(w-=2*Math.PI),!o&&S>w&&(S-=2*Math.PI)}var x=S-w;if(Math.abs(x)>f){var M=S,E=s,N=u;S=w+f*(o&&S>w?1:-1),s=T+r*Math.cos(S),u=A+a*Math.sin(S),d=this.a2c(s,u,r,a,n,0,o,E,N,[S,M,T,A])}x=S-w;var F=Math.cos(w),I=Math.sin(w),O=Math.cos(S),C=Math.sin(S),P=Math.tan(x/4),R=4/3*r*P,_=4/3*a*P,j=[t,e],L=[t+R*I,e-_*F],B=[s+R*C,u-_*O],V=[s,u];if(L[0]=2*j[0]-L[0],L[1]=2*j[1]-L[1],l)return[L,B,V].concat(d);for(var G=[],q=0,H=(d=[L,B,V].concat(d).join().split(",").map((function(t){return parseFloat(t)}))).length;q<H;q++)G[q]=q%2?p(d[q-1],d[q],h).y:p(d[q],d[q+1],h).x;return G}}],(r=[{key:"moveTo",value:function(t,e){this.path.c=!1,this.path.i=[[0,0]],this.path.o=[],this.path.v=[[t,e]],this.currentX=t,this.currentY=e}},{key:"lineTo",value:function(t,e){this.path.i.push([0,0]),this.path.o.push([0,0]),this.path.v.push([t,e]),this.currentX=t,this.currentY=e}},{key:"lineToRelative",value:function(t,e){this.lineTo(this.currentX+t,this.currentY+e)}},{key:"horizontalTo",value:function(t){this.lineTo(t,this.currentY)}},{key:"horizontalToRelative",value:function(t){this.horizontalTo(this.currentX+t)}},{key:"verticalTo",value:function(t){this.lineTo(this.currentX,t)}},{key:"verticalToRelative",value:function(t){this.verticalTo(this.currentY+t)}},{key:"cubicBezierCurveTo",value:function(t,e,r,a,n,i){this.path.i.push([r-n,a-i]),this.path.o.push([t-this.currentX,e-this.currentY]),this.path.v.push([n,i]),this.currentX=n,this.currentY=i}},{key:"cubicBezierCurveToRelative",value:function(t,e,r,a,n,i){this.cubicBezierCurveTo(this.currentX+t,this.currentY+e,this.currentX+r,this.currentY+a,this.currentX+n,this.currentY+i)}},{key:"quadraticBezierCurveTo",value:function(t,e,r,a){this.path.i.push([t-r,e-a]),this.path.o.push([t-this.currentX,e-this.currentY]),this.path.v.push([r,a]),this.currentX=r,this.currentY=a}},{key:"quadraticBezierCurveToRelative",value:function(t,e,r,a){this.quadraticBezierCurveTo(this.currentX+t,this.currentY+e,this.currentX+r,this.currentY+a)}},{key:"arcTo",value:function(e,r,a,n,i,o,s){for(var u=t.a2c(this.currentX,this.currentY,e,r,a,n,i,o,s);u.length>=6;){var l=u.splice(0,6);this.path.i.push([l[2]-l[4],l[3]-l[5]]),this.path.o.push([l[0]-this.currentX,l[1]-this.currentY]),this.path.v.push([l[4],l[5]]),this.currentX=l[4],this.currentY=l[5]}}},{key:"arcToRelative",value:function(t,e,r,a,n,i,o){this.arcTo(t,e,r,a,n,this.currentX+i,this.currentY+o)}},{key:"closePath",value:function(){this.path.c=!0}},{key:"uniform",value:function(){for(;this.path.o.length<this.path.i.length;)this.path.o.push([0,0])}}])&&a(e.prototype,r),i&&a(e,i),t}();e.PathMaker=i},function(t,e,r){var a=r(13),n=r(14);t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[i+s]=o[s];return e||n(o)}},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var a=new Uint8Array(16);t.exports=function(){return r(a),a}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}},function(t,e){for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);t.exports=function(t,e){var a=e||0,n=r;return[n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]]].join("")}},function(t,e,r){var a=r(16).parse;a.parseSVG=a,a.makeAbsolute=function(t){var e,r={x:0,y:0},a={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach((function(t){for(var n in"moveto"===t.command&&(e=t),t.x0=r.x,t.y0=r.y,a)n in t&&(t[n]+=t.relative?t[a[n]]:0);"x"in t||(t.x=r.x),"y"in t||(t.y=r.y),t.relative=!1,t.code=t.code.toUpperCase(),"closepath"==t.command&&(t.x=e.x,t.y=e.y),r=t})),t},t.exports=a},function(t,e,r){"use strict";function a(t,e,r,n){this.message=t,this.expected=e,this.found=r,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(a,Error),a.buildMessage=function(t,e){var r={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function a(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+a(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+a(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+a(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+a(t)}))}return"Expected "+function(t){var e,a,n,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(n=t[e],r[n.type](n));if(i.sort(),i.length>0){for(e=1,a=1;e<i.length;e++)i[e-1]!==i[e]&&(i[a]=i[e],a++);i.length=a}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:a,parse:function(t,e){e=void 0!==e?e:{};var r,n={},i={svg_path:gt},o=gt,s=function(t){if(!t)return[];for(var e=[],r=0;r<t.length;r++)e=e.concat.apply(e,t[r]);var a=e[0];return a&&"m"==a.code&&(delete a.relative,a.code="M"),e},u=function(t,e){return function(t,e){if(!e)return[t];for(var r=[t],a=0,n=e.length;a<n;a++)r[a+1]=e[a][1];return r}(t,e)},l=/^[Mm]/,c=ft(["M","m"],!1,!1),f=function(t,e,r){var a=Bt(t,[e]);return r&&(a=a.concat(Bt("M"==t?"L":"l",r[1]))),a},h=/^[Zz]/,d=ft(["Z","z"],!1,!1),p=function(){return Bt("Z")},m=/^[Ll]/,g=ft(["L","l"],!1,!1),y=function(t,e){return Bt(t,e)},v=/^[Hh]/,b=ft(["H","h"],!1,!1),k=function(t,e){return Bt(t,e.map((function(t){return{x:t}})))},T=/^[Vv]/,A=ft(["V","v"],!1,!1),w=function(t,e){return Bt(t,e.map((function(t){return{y:t}})))},S=/^[Cc]/,x=ft(["C","c"],!1,!1),M=function(t,e,r){return{x1:t.x,y1:t.y,x2:e.x,y2:e.y,x:r.x,y:r.y}},E=/^[Ss]/,N=ft(["S","s"],!1,!1),F=function(t,e){return{x2:t.x,y2:t.y,x:e.x,y:e.y}},I=/^[Qq]/,O=ft(["Q","q"],!1,!1),C=function(t,e){return{x1:t.x,y1:t.y,x:e.x,y:e.y}},P=/^[Tt]/,R=ft(["T","t"],!1,!1),_=/^[Aa]/,j=ft(["A","a"],!1,!1),L=function(t,e,r,a,n,i){return{rx:t,ry:e,xAxisRotation:r,largeArc:a,sweep:n,x:i.x,y:i.y}},B=function(t,e){return{x:t,y:e}},V=function(t){return 1*t},G=function(t){return 1*t.join("")},q=/^[01]/,H=ft(["0","1"],!1,!1),z=function(t){return"1"==t},D=function(){return""},X=",",U=ct(",",!1),Y=function(t){return t.join("")},Q=".",J=ct(".",!1),Z=/^[eE]/,K=ft(["e","E"],!1,!1),W=/^[+\-]/,$=ft(["+","-"],!1,!1),tt=/^[0-9]/,et=ft([["0","9"]],!1,!1),rt=function(t){return t.join("")},at=/^[ \t\n\r]/,nt=ft([" ","\t","\n","\r"],!1,!1),it=0,ot=[{line:1,column:1}],st=0,ut=[],lt=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');o=i[e.startRule]}function ct(t,e){return{type:"literal",text:t,ignoreCase:e}}function ft(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function ht(e){var r,a=ot[e];if(a)return a;for(r=e-1;!ot[r];)r--;for(a={line:(a=ot[r]).line,column:a.column};r<e;)10===t.charCodeAt(r)?(a.line++,a.column=1):a.column++,r++;return ot[e]=a,a}function dt(t,e){var r=ht(t),a=ht(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:a.line,column:a.column}}}function pt(t){it<st||(it>st&&(st=it,ut=[]),ut.push(t))}function mt(t,e,r){return new a(a.buildMessage(t,e),t,e,r)}function gt(){var t,e,r,a,i;for(t=it,e=[],r=_t();r!==n;)e.push(r),r=_t();if(e!==n)if((r=function(){var t,e,r,a,i,o;if(t=it,(e=yt())!==n){for(r=[],a=it,i=[],o=_t();o!==n;)i.push(o),o=_t();for(i!==n&&(o=yt())!==n?a=i=[i,o]:(it=a,a=n);a!==n;){for(r.push(a),a=it,i=[],o=_t();o!==n;)i.push(o),o=_t();i!==n&&(o=yt())!==n?a=i=[i,o]:(it=a,a=n)}r!==n?(t,e=u(e,r),t=e):(it=t,t=n)}else it=t,t=n;return t}())===n&&(r=null),r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n?(t,t=e=s(r)):(it=t,t=n)}else it=t,t=n;else it=t,t=n;return t}function yt(){var e,r,a,i,o,s;if(e=it,(r=function(){var e,r,a,i,o,s,u;e=it,l.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(c));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=xt())!==n?(o=it,(s=Ft())===n&&(s=null),s!==n&&(u=bt())!==n?o=s=[s,u]:(it=o,o=n),o===n&&(o=null),o!==n?(e,r=f(r,i,o),e=r):(it=e,e=n)):(it=e,e=n)}else it=e,e=n;return e}())!==n){for(a=[],i=it,o=[],s=_t();s!==n;)o.push(s),s=_t();for(o!==n&&(s=vt())!==n?i=o=[o,s]:(it=i,i=n);i!==n;){for(a.push(i),i=it,o=[],s=_t();s!==n;)o.push(s),s=_t();o!==n&&(s=vt())!==n?i=o=[o,s]:(it=i,i=n)}a!==n?(e,e=r=u(r,a)):(it=e,e=n)}else it=e,e=n;return e}function vt(){var e;return(e=function(){var e,r;e=it,h.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(d));r!==n&&(e,r=p());return e=r}())===n&&(e=function(){var e,r,a,i;e=it,m.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(g));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=bt())!==n?(e,r=y(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}())===n&&(e=function(){var e,r,a,i;e=it,v.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(b));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=kt())!==n?(e,r=k(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}())===n&&(e=function(){var e,r,a,i;e=it,T.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(A));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=kt())!==n?(e,r=w(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}())===n&&(e=function(){var e,r,a,i;e=it,S.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(x));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=function(){var t,e,r,a,i,o;if(t=it,(e=Tt())!==n){for(r=[],a=it,(i=Ft())===n&&(i=null),i!==n&&(o=Tt())!==n?a=i=[i,o]:(it=a,a=n);a!==n;)r.push(a),a=it,(i=Ft())===n&&(i=null),i!==n&&(o=Tt())!==n?a=i=[i,o]:(it=a,a=n);r!==n?(t,e=u(e,r),t=e):(it=t,t=n)}else it=t,t=n;return t}())!==n?(e,r=y(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}())===n&&(e=function(){var e,r,a,i;e=it,E.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(N));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=function(){var t,e,r,a,i,o;if(t=it,(e=At())!==n){for(r=[],a=it,(i=Ft())===n&&(i=null),i!==n&&(o=At())!==n?a=i=[i,o]:(it=a,a=n);a!==n;)r.push(a),a=it,(i=Ft())===n&&(i=null),i!==n&&(o=At())!==n?a=i=[i,o]:(it=a,a=n);r!==n?(t,e=u(e,r),t=e):(it=t,t=n)}else it=t,t=n;return t}())!==n?(e,r=y(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}())===n&&(e=function(){var e,r,a,i;e=it,I.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(O));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=function(){var t,e,r,a,i,o;if(t=it,(e=wt())!==n){for(r=[],a=it,(i=Ft())===n&&(i=null),i!==n&&(o=wt())!==n?a=i=[i,o]:(it=a,a=n);a!==n;)r.push(a),a=it,(i=Ft())===n&&(i=null),i!==n&&(o=wt())!==n?a=i=[i,o]:(it=a,a=n);r!==n?(t,e=u(e,r),t=e):(it=t,t=n)}else it=t,t=n;return t}())!==n?(e,r=y(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}())===n&&(e=function(){var e,r,a,i;e=it,P.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(R));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=function(){var t,e,r,a,i,o;if(t=it,(e=xt())!==n){for(r=[],a=it,(i=Ft())===n&&(i=null),i!==n&&(o=xt())!==n?a=i=[i,o]:(it=a,a=n);a!==n;)r.push(a),a=it,(i=Ft())===n&&(i=null),i!==n&&(o=xt())!==n?a=i=[i,o]:(it=a,a=n);r!==n?(t,e=u(e,r),t=e):(it=t,t=n)}else it=t,t=n;return t}())!==n?(e,r=y(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}())===n&&(e=function(){var e,r,a,i;e=it,_.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(j));if(r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n&&(i=function(){var t,e,r,a,i,o;if(t=it,(e=St())!==n){for(r=[],a=it,(i=Ft())===n&&(i=null),i!==n&&(o=St())!==n?a=i=[i,o]:(it=a,a=n);a!==n;)r.push(a),a=it,(i=Ft())===n&&(i=null),i!==n&&(o=St())!==n?a=i=[i,o]:(it=a,a=n);r!==n?(t,e=u(e,r),t=e):(it=t,t=n)}else it=t,t=n;return t}())!==n?(e,r=y(r,i),e=r):(it=e,e=n)}else it=e,e=n;return e}()),e}function bt(){var t,e,r,a,i,o;if(t=it,(e=xt())!==n){for(r=[],a=it,(i=Ft())===n&&(i=null),i!==n&&(o=xt())!==n?a=i=[i,o]:(it=a,a=n);a!==n;)r.push(a),a=it,(i=Ft())===n&&(i=null),i!==n&&(o=xt())!==n?a=i=[i,o]:(it=a,a=n);r!==n?(t,t=e=u(e,r)):(it=t,t=n)}else it=t,t=n;return t}function kt(){var t,e,r,a,i,o;if(t=it,(e=Et())!==n){for(r=[],a=it,(i=Ft())===n&&(i=null),i!==n&&(o=Et())!==n?a=i=[i,o]:(it=a,a=n);a!==n;)r.push(a),a=it,(i=Ft())===n&&(i=null),i!==n&&(o=Et())!==n?a=i=[i,o]:(it=a,a=n);r!==n?(t,t=e=u(e,r)):(it=t,t=n)}else it=t,t=n;return t}function Tt(){var t,e,r,a,i,o;return t=it,(e=xt())!==n?((r=Ft())===n&&(r=null),r!==n&&(a=xt())!==n?((i=Ft())===n&&(i=null),i!==n&&(o=xt())!==n?(t,t=e=M(e,a,o)):(it=t,t=n)):(it=t,t=n)):(it=t,t=n),t}function At(){var t,e,r,a;return t=it,(e=xt())!==n?((r=Ft())===n&&(r=null),r!==n&&(a=xt())!==n?(t,t=e=F(e,a)):(it=t,t=n)):(it=t,t=n),t}function wt(){var t,e,r,a;return t=it,(e=xt())!==n?((r=Ft())===n&&(r=null),r!==n&&(a=xt())!==n?(t,t=e=C(e,a)):(it=t,t=n)):(it=t,t=n),t}function St(){var t,e,r,a,i,o,s,u,l,c,f;return t=it,(e=Mt())!==n?((r=Ft())===n&&(r=null),r!==n&&(a=Mt())!==n?((i=Ft())===n&&(i=null),i!==n&&(o=Et())!==n&&Ft()!==n&&(s=Nt())!==n?((u=Ft())===n&&(u=null),u!==n&&(l=Nt())!==n?((c=Ft())===n&&(c=null),c!==n&&(f=xt())!==n?(t,t=e=L(e,a,o,s,l,f)):(it=t,t=n)):(it=t,t=n)):(it=t,t=n)):(it=t,t=n)):(it=t,t=n),t}function xt(){var t,e,r,a;return t=it,(e=Et())!==n?((r=Ft())===n&&(r=null),r!==n&&(a=Et())!==n?(t,t=e=B(e,a)):(it=t,t=n)):(it=t,t=n),t}function Mt(){var t,e;return t=it,(e=Ot())===n&&(e=Rt()),e!==n&&(t,e=V(e)),t=e}function Et(){var t,e,r,a;return t=it,e=it,(r=Pt())===n&&(r=null),r!==n&&(a=Ot())!==n?e=r=[r,a]:(it=e,e=n),e===n&&(e=it,(r=Pt())===n&&(r=null),r!==n&&(a=Rt())!==n?e=r=[r,a]:(it=e,e=n)),e!==n&&(t,e=G(e)),t=e}function Nt(){var e,r;return e=it,q.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(H)),r!==n&&(e,r=z(r)),e=r}function Ft(){var t,e,r,a,i;if(t=it,e=[],(r=_t())!==n)for(;r!==n;)e.push(r),r=_t();else e=n;if(e!==n)if((r=It())===n&&(r=null),r!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n?t=e=[e,r,a]:(it=t,t=n)}else it=t,t=n;else it=t,t=n;if(t===n){if(t=it,e=it,(r=It())!==n){for(a=[],i=_t();i!==n;)a.push(i),i=_t();a!==n?e=r=[r,a]:(it=e,e=n)}else it=e,e=n;e!==n&&(t,e=D()),t=e}return t}function It(){var e;return 44===t.charCodeAt(it)?(e=X,it++):(e=n,0===lt&&pt(U)),e}function Ot(){var e,r,a,i;return e=it,r=it,(a=function(){var e,r,a,i,o;e=it,r=it,(a=Rt())===n&&(a=null);a!==n?(46===t.charCodeAt(it)?(i=Q,it++):(i=n,0===lt&&pt(J)),i!==n&&(o=Rt())!==n?r=a=[a,i,o]:(it=r,r=n)):(it=r,r=n);r===n&&(r=it,(a=Rt())!==n?(46===t.charCodeAt(it)?(i=Q,it++):(i=n,0===lt&&pt(J)),i!==n?r=a=[a,i]:(it=r,r=n)):(it=r,r=n));r!==n&&(e,r=Y(r));return e=r}())!==n?((i=Ct())===n&&(i=null),i!==n?r=a=[a,i]:(it=r,r=n)):(it=r,r=n),r===n&&(r=it,(a=Rt())!==n&&(i=Ct())!==n?r=a=[a,i]:(it=r,r=n)),r!==n&&(e,r=Y(r)),e=r}function Ct(){var e,r,a,i,o;return e=it,r=it,Z.test(t.charAt(it))?(a=t.charAt(it),it++):(a=n,0===lt&&pt(K)),a!==n?((i=Pt())===n&&(i=null),i!==n&&(o=Rt())!==n?r=a=[a,i,o]:(it=r,r=n)):(it=r,r=n),r!==n&&(e,r=Y(r)),e=r}function Pt(){var e;return W.test(t.charAt(it))?(e=t.charAt(it),it++):(e=n,0===lt&&pt($)),e}function Rt(){var e,r,a;if(e=it,r=[],tt.test(t.charAt(it))?(a=t.charAt(it),it++):(a=n,0===lt&&pt(et)),a!==n)for(;a!==n;)r.push(a),tt.test(t.charAt(it))?(a=t.charAt(it),it++):(a=n,0===lt&&pt(et));else r=n;return r!==n&&(e,r=rt(r)),e=r}function _t(){var e,r;return e=it,at.test(t.charAt(it))?(r=t.charAt(it),it++):(r=n,0===lt&&pt(nt)),r!==n&&(e,r=D()),e=r}var jt={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Lt in jt)jt[Lt.toUpperCase()]=jt[Lt];function Bt(t,e){e||(e=[{}]);for(var r=e.length;r--;){var a={code:t,command:jt[t]};for(var n in t==t.toLowerCase()&&(a.relative=!0),e[r])a[n]=e[r][n];e[r]=a}return e}if((r=o())!==n&&it===t.length)return r;throw r!==n&&it<t.length&&pt({type:"end"}),mt(ut,st<t.length?t.charAt(st):null,st<t.length?dt(st,st+1):dt(st,st))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,n=(a=r(0))&&a.__esModule?a:{default:a};r(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){var t;return o(this,e),(t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))).chartIdx=0,t._type=e.actionTypes.appear,t.animationType="",t._easing=e.easingType.easeLinear,t._duration=0,t.startTime,t.attribute=function(){return function t(){o(this,t),this.attrName,this.from,this.to}}(),t}var r,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),r=e,c=[{key:"transToVisualAttrAction",value:function(t,r,a,i){for(var o=[],s=function(s){var u=a[s],l=[],c=[];i.forEach((function(t,e){if(r+1<t.length)if("d"===u||"textContent"===u||"fill"===u||"stroke"===u){var a=[e,t[r][u]?t[r][u]:"d"===u?"m0,0":t[r][u]],n=[e,t[r+1][u]?t[r+1][u]:"d"===u?"m0,0":t[r+1][u]];if("d"===u){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),o=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d",t[r][u]?t[r][u]:"m0,0"),o.setAttributeNS(null,"d",t[r+1][u]?t[r+1][u]:"m0,0");for(var s=i.getTotalLength()/300,f=o.getTotalLength()/300,h=[],d=[],p=0;p<300;p++){var m=i.getPointAtLength(s*p),g=o.getPointAtLength(f*p);h.push([m.x,m.y]),d.push([g.x,g.y])}a.push(h),n.push(d)}l.push(a),c.push(n)}else l.push([e,parseFloat(t[r][u])]),c.push([e,parseFloat(t[r+1][u])])}));var f={chartIdx:t.chartIdx,reference:n.default.timingRef.previousStart,offset:0,duration:t.type===e.actionTypes.transition?t.duration:0,type:e.actionTargets.mark,animationType:e.targetAnimationType.custom,attribute:{attrName:u,from:l,to:c}};o.push(f)},u=0;u<a.length;u++)s(u);if(t.type!==e.actionTypes.transition){var l={chartIdx:t.chartIdx,reference:t.reference,offset:t.offset,easing:t.easing,duration:void 0===t.duration?300:t.duration,type:e.actionTargets.mask};switch(t.type){case e.actionTypes.fade:l.animationType=e.targetAnimationType.fade,l.type=e.actionTargets.mark,l.attribute={attrName:"opacity",from:1,to:0};break;case e.actionTypes.fadeOut:l.animationType=e.targetAnimationType.fade,l.type=e.actionTargets.mark,l.attribute={attrName:"opacity",from:0,to:1};break;case e.actionTypes.wipeBottom:case e.actionTypes.wipeOutFromTop:l.animationType=e.targetAnimationType.wipe,l.attribute={attrName:"scaleY",from:0,to:1};break;case e.actionTypes.wipeTop:l.animationType=e.targetAnimationType.move,l.attribute={attrName:"y",from:0,to:1};break;case e.actionTypes.wipeOutFromBottom:l.animationType=e.targetAnimationType.move,l.attribute={attrName:"y",from:1,to:0};break;case e.actionTypes.wipeLeft:l.animationType=e.targetAnimationType.move,l.attribute={attrName:"x",from:0,to:1};break;case e.actionTypes.wipeOutFromRight:l.animationType=e.targetAnimationType.move,l.attribute={attrName:"x",from:1,to:0};break;case e.actionTypes.wipeRight:l.animationType=e.targetAnimationType.wipe,l.attribute={attrName:"width",from:1,to:0};break;case e.actionTypes.wipeOutFromLeft:l.animationType=e.targetAnimationType.wipe,l.attribute={attrName:"width",from:0,to:1};break;case e.actionTypes.wheel:l.animationType=e.targetAnimationType.wheel,l.attribute={attrName:"startAngle",from:0,to:1};break;case e.actionTypes.wheelOut:l.animationType=e.targetAnimationType.wheel,l.attribute={attrName:"startAngle",from:1,to:0};break;case e.actionTypes.circle:l.animationType=e.targetAnimationType.circle,l.attribute={attrName:"innerRadius",from:0,to:1};break;case e.actionTypes.circleOut:l.animationType=e.targetAnimationType.circle,l.attribute={attrName:"innerRadius",from:1,to:0};break;case e.actionTypes.grow:l.type=e.actionTargets.mark,l.animationType=e.targetAnimationType.grow,l.attribute={attrName:"stroke-dashoffset",from:1,to:0};break;case e.actionTypes.degrow:l.type=e.actionTargets.mark,l.animationType=e.targetAnimationType.grow,l.attribute={attrName:"stroke-dashoffset",from:0,to:1};break;case e.actionTypes.appear:l.duration=1e3/n.default.FRAME_RATE,l.animationType=e.targetAnimationType.fade,l.attribute={attrName:"opacity",from:1,to:0};break;case e.actionTypes.zoom:l.type=e.actionTargets.mark,l.reference=n.default.timingRef.previousStart,l.offset=0,l.animationType=e.targetAnimationType.wipe,l.attribute={attrName:"width",from:0,to:1};var c={chartIdx:t.chartIdx,easing:t.easing,duration:void 0===t.duration?300:t.duration,reference:t.reference,offset:t.offset,type:e.actionTargets.mask,animationType:e.targetAnimationType.wipe,attribute:{attrName:"height",from:1,to:0}};o.push(c);break;case e.actionTypes.custom:l.type=e.actionTargets.mark,l.animationType=e.targetAnimationType.custom,l.attribute={},void 0!==t.attribute&&(l.attribute={attrName:t.attribute.attrName,from:t.attribute.from,to:t.attribute.to})}o.push(l)}return o}},{key:"calActionDuration",value:function(t,r,a){for(var n=0,o=-1e5,s=0,u=0,l=!1,c=function(r){var c=void 0,f=new Map;c=t[r].calOffsetTime(s,u,0,a),r>0&&t[r-1].animationType===e.targetAnimationType.mistake&&c.forEach((function(e,a){c.set(a,e-t[r-1].offset)}));var h=1e6,d=-1e5;t[r].offsetStart=new Map,c.forEach((function(e,a){var s=0;"object"===i(t[r].duration)?(l=!0,s=e):"number"==typeof t[r].duration&&(s=e+t[r].duration),f.set(a,s),t[r].offsetStart.set(a,e),e<h&&(h=e),s>d&&(d=s),e<n&&(n=e),s>o&&(o=s)})),s=h,u=d},f=0;f<t.length;f++)c(f);var h=o-n,d=new Map,p=new Map;return l?(r.forEach((function(t,e){t.forEach((function(t,e){(void 0===p.get(e)||t[0]<p.get(e))&&p.set(e,t[0])}))})),r.forEach((function(t,e){var r=0;t.forEach((function(t,e){var a=p.get(e);r+=t[1]*t[0]/a})),d.set(e,h+r)}))):r.forEach((function(t,e){d.set(e,h)})),[d,p,t]}}],(a=[{key:"initAction",value:function(t){this.chartIdx=t.chartIdx,this.type=t.type,this.animationType=t.animationType,this.reference=t.reference,this.offset=t.offset,this.duration=t.duration,this.easing=t.easing,void 0!==t.attribute&&(this.attribute.attrName=t.attribute.attrName,this.attribute.from=t.attribute.from,this.attribute.to=t.attribute.to)}},{key:"type",set:function(t){void 0!==t&&(Object.keys(e.actionTypes).includes(t)?this._type=t:alert("the 'type' of action is not defined. "))},get:function(){return this._type}},{key:"easing",set:function(t){void 0!==t&&(Object.keys(e.easingType).includes(t)?this._easing=t:alert("the 'easing' of action is not defined. "))},get:function(){return this._easing}},{key:"duration",set:function(t){void 0!==t&&(this._duration="number"==typeof t?Math.floor(t/(1e3/n.default.FRAME_RATE))*(1e3/n.default.FRAME_RATE):t)},get:function(){return this._duration}}])&&s(r.prototype,a),c&&s(r,c),e}(n.default);c.actionTypes={fade:"fade",wipeBottom:"wipe bottom",wipeTop:"wipe top",wipeLeft:"wipe left",wipeRight:"wipe right",wheel:"wheel",appear:"appear",circle:"circle",grow:"grow",custom:"custom",fadeOut:"fade out",wipeOutFromLeft:"wipe out from left",wipeOutFromTop:"wipe out from top",wipeOutFromRight:"wipe out from right",wipeOutFromBottom:"wipe out from bottom",wheelOut:"wheel out",circleOut:"circle out",degrow:"degrow",transition:"magic move",zoom:"zoom",mark:"mask",mask:"mark"},c.actionTargets={mark:"mark",mask:"mask"},c.targetAnimationType={fade:"fade",wipe:"wipe",move:"move",wheel:"wheel",circle:"circle",appear:"appear",grow:"grow",custom:"custom",mistake:"mistake"},c.easingType={easeLinear:"easeLinear",easeInQuad:"easeInQuad",easeOutQuad:"easeOutQuad",easeInOutQuad:"easeInOutQuad",easeInCubic:"easeInCubic",easeOutCubic:"easeOutCubic",easeInOutCubic:"easeInOutCubic",easeOutBounce:"easeOutBounce"};var f=c;e.default=f,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,n=(a=r(0))&&a.__esModule?a:{default:a};function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){var t;return s(this,e),(t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))._groupBy="id",t._reference=n.default.timingRef.previousStart,t._delay=0,t.sort=function(){return function t(){s(this,t),this.field,this.order,this.expr}}(),t.grouping,t}var r,a,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),r=e,(a=[{key:"initGrouping",value:function(t){this.groupBy=t.groupBy,this.reference=t.reference,this.delay=t.delay,void 0!==t.sort&&(this.sort.field=t.sort.field,this.sort.order=t.sort.order,this.sort.expr=t.sort.expr),void 0!==t.grouping?(this.grouping=new e,this.grouping.initGrouping(t.grouping)):void 0===t.grouping&&"id"!==t.groupBy&&(this.grouping=new e,this.grouping.groupBy="id")}},{key:"arrangeOrder",value:function(t,e){var r={groupRef:"root",children:[]};return r.marks=t,this.generateTree(r,e),this.getMarkOrder(r)}},{key:"generateTree",value:function(t,r){for(var a,n=this.groupBy,s=new Map,u=0;u<t.marks.length|(a=t.marks[u]);u++){var l=r.get(a)["data-datum"],c=void 0;if(void 0!==r.get(a)[n])c=r.get(a)[n];else{if(void 0!==r.get(a)[n]||void 0===l[n])return void console.log("error: grouping by an unknown attribute");c=l[n]}if(void 0!==s.get(c))s.get(c).marks.push(a);else{var f={};f.groupRef=n,f.refValue=c,f.children=[],f.marks=[a],s.set(c,f)}}switch(o(this.sort.order)){case"object":for(var h,d=0;d<this.sort.order.length|(h=this.sort.order[d]);d++)void 0!==s.get(h)&&t.children.push(s.get(h));break;case"string":var p=!0;if(s.forEach((function(t,e){t.marks.length>1&&(p=!1)})),void 0!==this.sort.field&&p){var m=this.sort.field,g=[].concat(i(s)),y=this.sort.order;g.sort((function(t,a){var n=t[1].marks[0],i=a[1].marks[0],o="",s="",u=r.get(n)["data-datum"],l=r.get(i)["data-datum"];return void 0!==r.get(n)[m]&&"undefined"!==r.get(i)[m]?(o=r.get(n)[m],s=r.get(i)[m]):void 0===r.get(n)[m]&&void 0!==u[m]&&void 0===r.get(i)[m]&&void 0!==l[m]&&(o=u[m],s=l[m]),isNaN(parseFloat(o))||(o=parseFloat(o)),isNaN(parseFloat(s))||(s=parseFloat(s)),y===e.orderTypes.ascending?o>=s?1:-1:y===e.orderTypes.descending?s>=o?1:-1:y===e.orderTypes.random?Math.random()>=.5?1:-1:void 0}));for(var v,b=0;b<g.length|(v=g[b]);b++)t.children.push(v[1])}else{var k=[].concat(i(s));this.sort.order===e.orderTypes.ascending?k.sort((function(t,e){return t[0]>=e[0]?1:-1})):this.sort.order===e.orderTypes.descending?k.sort((function(t,e){return e[0]>=t[0]?1:-1})):this.sort.order===e.orderTypes.random&&k.sort((function(t,e){return Math.random()>=.5?1:-1}));for(var T,A=0;A<k.length|(T=k[A]);A++)t.children.push(T[1])}break;default:s.forEach((function(e,r){t.children.push(e)}))}if(void 0!==this.grouping)for(var w,S=0;S<t.children.length|(w=t.children[S]);S++)this.grouping.generateTree(w,r)}},{key:"getMarkOrder",value:function(t){var e=[];if(null!=t){var r=[];for(r.unshift(t);0!=r.length;){var a=r.shift(),n=a.children;if(n.length<=0)e=[].concat(i(e),i(a.marks));else for(var o=0;o<n.length;o++)r.push(n[o])}}return e}},{key:"calTimeInGrouping",value:function(t,e){var r=this.groupBy,a=new Map;if(t.forEach((function(t,n){var i=e.get(n)["data-datum"];void 0!==e.get(n)[r]?a.set(n,e.get(n)[r]):void 0===e.get(n)[r]&&void 0!==i[r]?a.set(n,i[r]):console.log("error: grouping by an unknown attribute")})),void 0!==this.grouping){this.grouping.calTimeInGrouping(t,e);for(var o,s,u=[].concat(i(a)),l="",c=new Array,f=new Map,h=0;h<u.length;h++){var d=u[h][0],p=u[h][1];p!==l&&(this.updateGroupingTime(o,s,f,c,t),o=c[0],s=c[c.length-1],f=c,c=[],l=p),c.push(d)}this.updateGroupingTime(o,s,f,c,t)}else{var m=[].concat(i(t.entries()));m[0][1].startTime=0;for(var g=1;g<m.length;g++){var y=void 0,v=m[g-1][1].startTime,b=v+m[g-1][1].totalDuration;switch(this.reference){case n.default.timingRef.previousStart:y=v+this.delay;break;case n.default.timingRef.previousEnd:y=b+this.delay;break;case n.default.timingRef.absolute:y=this.delay;break;default:y=v+this.delay}m[g][1].startTime=y,t.set(m[g][0],m[g][1])}}}},{key:"updateGroupingTime",value:function(t,e,r,a,i){for(var o,s,u=-1e4,l=0;l<r.length|(s=r[l]);l++)i.get(s).startTime+i.get(s).totalDuration>u&&(u=i.get(s).startTime+i.get(s).totalDuration,o=s);if(void 0!==t&&void 0!==o){var c=0;switch(this.reference){case n.default.timingRef.previousStart:c=i.get(t).startTime-i.get(a[0]).startTime+this.delay;break;case n.default.timingRef.previousEnd:c=i.get(o).startTime+i.get(o).totalDuration-i.get(a[0]).startTime+this.delay;break;case n.default.timingRef.absolute:c=this.delay-i.get(a[0]).startTime}for(var f,h=0;h<a.length|(f=a[h]);h++)i.get(f).startTime+=c}}},{key:"groupBy",set:function(t){void 0!==t&&(this._groupBy=t)},get:function(){return this._groupBy}},{key:"reference",set:function(t){if(void 0!==t){var e=n.default.transRef(t);Object.keys(n.default.timingRef).includes(e)?this._reference=t:alert("the 'reference' of TimingSpec has to be one of 'previousStart', 'previousEnd' or 'absolute'. ")}},get:function(){return this._reference}},{key:"delay",set:function(t){void 0!==t&&(t>=1e3/n.default.FRAME_RATE||0===t?this._delay=t:this._delay=1e3/n.default.FRAME_RATE)},get:function(){return this._delay}}])&&u(r.prototype,a),f&&u(r,f),e}(n.default);f.orderTypes={ascending:"ascending",descending:"descending",random:"random"};var h=f;e.default=h,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=l(r(4)),n=l(r(5)),i=l(r(0)),o=l(r(3)),s=r(1),u=r(2);function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.chartSpecs,this.facet,this._animations,this.chartWidth,this.chartHeight}var e,r,l;return e=t,l=[{key:"loadSpec",value:function(t,e){var r=new XMLHttpRequest,a="file:"===document.location.protocol?0:200;if(r.open("GET",t,!1),r.overrideMimeType("text/html;charset=utf-8"),r.send(null),r.status===a){var n=r.responseText;e(JSON.parse(n))}else 404===r.status&&console.log("can not find "+t+" ! Please check the url.")}}],(r=[{key:"init",value:function(t){var e=this;this.chartSpecs=[];var r=t;r.charts=a.default.chartPreProcessing(r.charts);for(var l=0;l<r.charts.length;l++){var f=void 0===r.charts[l].id?"chart"+l:r.charts[l].id,h=new a.default(f,r.charts[l].source);this.chartSpecs.push(h)}r.facet&&(this.facet=new n.default(r.facet.type,r.facet.views)),a.default.loadCharts(this.chartSpecs,this.facet),u.globalVar.jsMovin.clearLayers(),u.globalVar.jsMovin.setViewport(a.default.viewport.chartWidth,a.default.viewport.chartHeight);var d=a.default.removeTransAndMerge();if(document.getElementById("chartContainer").innerHTML="",document.getElementById("chartContainer").appendChild(d),a.default.addLottieMarkLayers(d),u.globalVar.jsMovin.setFrameRate(i.default.FRAME_RATE),this.animations=r.animations,Array.isArray(this.animations))for(var p,m=function(t){var r=e.animations[t],n=document.createElement("div");document.body.appendChild(n),n.innerHTML=a.default.charts[r.chartIdx].outerHTML;for(var i=n.querySelectorAll(r.selection),u=[],l=0;l<a.default.changedAttrs.length;l++)u.push(a.default.changedAttrs[l]);var f=new o.default;f.translate(r,u);var h=[];i.length>0&&[].forEach.call(i,(function(t){if(t.classList.contains("mark")){var e=t.getAttribute("id");if(h.push(e),"path"===t.tagName){var r=s.Util.toJSON(t),a=s.Util.discretizePath(r);if(a){if("lines"===a.type)for(var n=0;n<a.data.length;n++)r.attr["x"+(1+2*n)]=a.data[n][0][0],r.attr["y"+(1+2*n)]=a.data[n][0][1],r.attr["x"+(2+2*n)]=a.data[n][1][0],r.attr["y"+(2+2*n)]=a.data[n][1][1];else for(var i=Object.keys(a.data),o=0;o<i.length;o++){var u=i[o];"radius"===u?a.data[u].length>1?(r.attr.innerRadius=a.data[u][0].rx+1,r.attr.outterRadius=a.data[u][1].rx-1):(r.attr.innerRadius=0,r.attr.outterRadius=a.data[u][0].rx-1):r.attr[u]=a.data[u]}t=s.Util.toDOM(r)}}for(var l={},d=[].concat(c(t.attributes)),p=0;p<d.length;p++){var m=d[p];l[m.name]=t.getAttribute(m.name)}var g=document.getElementById(e);l.bbWidth=g.getBBox().width,l.bbHeight=g.getBBox().height,l.bbX=g.getBBox().x,l.bbY=g.getBBox().y,l.content=t.textContent,l.id=e;var y=JSON.parse(t.getAttribute("data-datum"));Array.isArray(y)&&(y=y[0]),l["data-datum"]=y,"path"!==t.tagName&&"line"!==t.tagName||(l["stroke-dasharray"]=document.getElementById(e).getTotalLength(),l["stroke-dashoffset"]=document.getElementById(e).getTotalLength()),f.domMarks.set(e,l)}})),f.calAniTime(h,p),p=f,document.body.removeChild(n)},g=0;g<this.animations.length;g++)m(g)}},{key:"render",value:function(){o.default.renderAnimation(),o.default.mapToLottieSpec();var t=u.globalVar.jsMovin.toJSON();console.log(t)}},{key:"animations",set:function(t){var e=t.map((function(t){return t.chartIdx=0,t})),r=0;if((r=this.facet?this.facet.views[0].frames.length:this.chartSpecs.length)>1)for(var a=function(r){var a=s.Util.deepClone(t);a[0].reference=i.default.timingRef.previousEnd;var n=a.map((function(t){return t.chartIdx=r,t}));e.push.apply(e,c(n))},n=1;n<r-1;n++)a(n);this._animations=e},get:function(){return this._animations}}])&&f(e.prototype,r),l&&f(e,l),t}();e.default=h,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(r(0)),n=o(r(3)),i=r(1);function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"renderFrame",value:function(e){var r=n.default.renderFrame(e);if(void 0===r)return!1;for(var a,o=function(e,r){r[1].forEach((function(e,a){var n="";if("mark"===e.type){switch(n="ani"+r[0],e.attrName){case"textContent":if(i.Util.checkHTML(e.value)){var o=i.Util.strToDomNode(e.value);document.getElementById(n).appendChild(o)}else document.getElementById(n).innerHTML=e.value,document.getElementById(n).textContent=e.value;break;case"stroke-dashoffset":document.getElementById(n).setAttributeNS(null,"stroke-dasharray",document.getElementById(n).getTotalLength()),document.getElementById(n).setAttributeNS(null,e.attrName,e.value);break;case"x":case"y":document.getElementById(n).setAttributeNS(null,e.attrName,e.value),document.getElementById("animaskCover"+r[0])&&("y"===e.attrName&&"text"===document.getElementById(r[0]).tagName?document.getElementById("animaskCover"+r[0]).setAttributeNS(null,e.attrName,e.value-parseFloat(document.getElementById("animaskBg"+r[0]).getAttributeNS(null,"height"))):document.getElementById("animaskCover"+r[0]).setAttributeNS(null,e.attrName,e.value)),document.getElementById(n).setAttributeNS(null,e.attrName,e.value);break;default:document.getElementById(n).setAttributeNS(null,e.attrName,e.value)}var s="animaskBg"+r[0],u=document.getElementById(n).getBBox();document.getElementById(s).setAttributeNS(null,"x",u.x-1),document.getElementById(s).setAttributeNS(null,"y",u.y-1),document.getElementById(s).setAttributeNS(null,"width",u.width+2),document.getElementById(s).setAttributeNS(null,"height",u.height+2)}else if("mask"===e.type){n="animask"+r[0];var l=document.querySelectorAll("#"+n+' [id^="animaskCover"]');switch(e.animationType){case"fade":case"move":case"wipe":case"custom":if(l.length>0){var c=document.getElementById("animaskCover"+r[0]);if("rect"!==c.getAttribute("maskType")){c.parentNode.removeChild(c);var f=t.generateMaskCover(t.coverTypes.rect,r[0],e.attrName,e.value);document.getElementById(n).appendChild(f)}else document.getElementById("animaskCover"+r[0]).setAttributeNS(null,e.attrName,e.value)}else{var h=t.generateMaskCover(t.coverTypes.rect,r[0],e.attrName,e.value);document.getElementById(n).appendChild(h)}break;case"circle":case"wheel":var d=i.Util.arc(e.value.cx,e.value.cy,e.value.innerRadius,e.value.outterRadius-6,e.value.startAngle,e.value.endAngle);if(l.length>0){var p=document.getElementById("animaskCover"+r[0]);if("wedge"!==p.getAttribute("maskType")){p.parentNode.removeChild(p);var m=t.generateMaskCover(t.coverTypes.path,r[0],"d",d);document.getElementById(n).appendChild(m)}else document.getElementById("animaskCover"+r[0]).setAttributeNS(null,"d",d)}else{var g=t.generateMaskCover(t.coverTypes.path,r[0],"d",d);document.getElementById(n).appendChild(g)}break;case"mistake":l.length>0&&document.getElementById("animaskCover"+r[0]).setAttributeNS(null,e.attrName,e.value)}}else console.log("this status has no type")}))},s=0;s<r.length|(a=r[s]);s++)o(0,a);return!0}},{key:"generateMaskCover",value:function(e,r,a,n){var i;switch(e){case t.coverTypes.rect:(i=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"maskType","rect"),i.setAttributeNS(null,"x",document.getElementById("animaskBg"+r).getAttribute("x")),i.setAttributeNS(null,"y",document.getElementById("animaskBg"+r).getAttribute("y")),i.setAttributeNS(null,"width",document.getElementById("animaskBg"+r).getAttribute("width")),i.setAttributeNS(null,"height",document.getElementById("animaskBg"+r).getAttribute("height"));break;case t.coverTypes.path:(i=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"maskType","wedge"),document.getElementById(r).getAttribute("transform")&&i.setAttributeNS(null,"tranform",document.getElementById(r).getAttribute("transform"))}return i.setAttributeNS(null,"id","animaskCover"+r),i.setAttributeNS(null,"fill","#000"),i.setAttributeNS(null,"stroke","#000"),i.setAttributeNS(null,"stroke-width",4),"stroke"!==a&&i.setAttributeNS(null,a,n),i}},{key:"resetCover",value:function(){var t=document.querySelectorAll('[id^="animaskCover"]');t.length>0&&[].forEach.call(t,(function(t){t.parentNode.removeChild(t)}))}},{key:"play",value:function(){var t=this,e=0,r=setInterval((function(){e=parseInt(e/(1e3/a.default.FRAME_RATE))*(1e3/a.default.FRAME_RATE);var i=t.renderFrame(e);((e+=1e3/a.default.FRAME_RATE)>n.default.wholeEndTime||!i)&&(clearInterval(r),r="undefined",e=0)}),1e3/a.default.FRAME_RATE)}}],(r=null)&&s(e.prototype,r),o&&s(e,o),t}();u.coverTypes={rect:Symbol(),path:Symbol()};var l=u;e.default=l,t.exports=e.default}])}));
//# sourceMappingURL=anichart.min.js.map